<package id="resources"
         name="xtpos"
         developer="xTuple"
         descrip="Retail Point of Sale System"
         version="3.7.3"
         updater="2.2.0">
  <pkgnotes>Retail Point of Sale add-on package for xTuple ERP.

	This file is part of the xtpos Package for xTuple ERP, and
	is Copyright (c) 1999-2011 by OpenMFG LLC, d/b/a xTuple.
	It is licensed to you under the xTuple End-User License
	Agreement ("the EULA"), the full text of which is available
	at www.xtuple.com/EULA.  While the EULA gives you access
	to source code and encourages your involvement in the
	development process, this Package is not free software.  By
	using this software, you agree to be bound by the terms of
	the EULA.
  </pkgnotes>

  <prerequisite type="Query"
                name="Test xTuple ERP version">
    <query>
      SELECT (fetchMetricText('ServerVersion') >= '3.6.0');
    </query>
    <message>
      This version of the xtpos package only works with xTuple ERP
      versions 3.6.0 and greater.
    </message>
  </prerequisite>

  <prerequisite type="Query"
                name="Ensure Point of Sale package is at 3.7.2" >
    <query>
      SELECT pkghead_version = '3.7.2'
        FROM pkghead
       WHERE (pkghead_name IN 'xtpos');
    </query>
    <message>
      This Updater package updates xtpos 3.7.2 to 3.7.3. Either xtpos is not
      installed or it is installed but not version 3.7.2.
    </message>
  </prerequisite>

  <prerequisite type="license" name="xTuple Concise EULA">
    <message>
      &lt;p>
        This file is part of the xtpos Package for xTuple ERP, and is Copyright
        (c) 1999-2011 by OpenMFG LLC, d/b/a xTuple.  It is licensed to you under
        the xTuple End-User License Agreement ("the EULA"), the full
        text of which is available at
        &lt;a href="http://www.xtuple.com/EULA">http://www.xtuple.com/EULA&lt;/a>.
        While the EULA gives you access to source code and encourages your
        involvement in the development process, this Package is not
        free software.  By using this software, you agree to be bound
        by the terms of the EULA.
      &lt;/p>
    </message>
  </prerequisite>

  <initscript     file="setGUC.sql" />

  <createfunction file="database/functions/cashregadjust.sql"    name="cashregadjust" />
  <createfunction file="database/functions/cashregclose.sql"     name="cashregclose" />
  <createfunction file="database/functions/cashregopen.sql"      name="cashregopen" />
  <createfunction file="database/functions/checkstatus.sql"      name="checkstatus" />
  <createfunction file="database/functions/depositchecks.sql"    name="depositchecks" />
  <createfunction file="database/functions/fetchsalenumber.sql"  name="fetchsalenumber"/>
  <createfunction file="database/functions/getrtlsiteid.sql"     name="getrtlsiteid" />
  <createfunction file="database/functions/getsaleheadid.sql"    name="getsaleheadid" />
  <createfunction file="database/functions/getterminalid.sql"    name="getterminalid" />
  <createfunction file="database/functions/itemprice.sql"        name="itemprice" />
  <createfunction file="database/functions/postsaleinv.sql"      name="postsaleinv" />
  <createfunction file="database/functions/reghistsales.sql"     name="reghistsales" />
  <createfunction file="database/functions/saleclosecash.sql"    name="saleclosecash" />
  <createfunction file="database/functions/saleclosecheck.sql"   name="saleclosecheck" />
  <createfunction file="database/functions/saleclosecredit.sql"  name="saleclosecredit"/>
  <createfunction file="database/functions/saletax.sql"          name="saletax" />

  <createtrigger file="database/triggers/rtlsitestatuscheck.sql"     name="rtlsitestatuscheck" />
  <createtrigger file="database/triggers/rtlsitetermstatuscheck.sql" name="rtlsitetermstatuscheck" />
  <createtrigger file="database/triggers/saleheadprivcheck.sql"      name="saleheadprivcheck" />
  <createtrigger file="database/triggers/saleitemcalctax.sql"        name="saleitemcalctax" />
  <createtrigger file="database/triggers/saleitemdefaults.sql"       name="saleitemdefaults" />
  <createtrigger file="database/triggers/saleitemprivcheck.sql"      name="saleitemprivcheck" />
  <createtrigger file="database/triggers/saleitemstatuscheck.sql"    name="saleitemstatuscheck" />

  <loadmetasql file="client/metasql/cashregister-deletesale.mql" />
  <loadmetasql file="client/metasql/cashregister-post.mql" />
  <loadmetasql file="client/metasql/cashregister-sales.mql" />
  <loadmetasql file="client/metasql/configureretail-nextsalenumber.mql" />
  <loadmetasql file="client/metasql/configureretail-setsalenumber.mql" />
  <loadmetasql file="client/metasql/display-detailedregisterhistory.mql" />
  <loadmetasql file="client/metasql/payment-closesale.mql" />
  <loadmetasql file="client/metasql/payment-fetchccinfo.mql" />
  <loadmetasql file="client/metasql/registerhistory-detail.mql" />
  <loadmetasql file="client/metasql/registerreceipt-checks.mql" />
  <loadmetasql file="client/metasql/registerreceipt-creditcards.mql" />
  <loadmetasql file="client/metasql/registerreceipt-detail.mql" />
  <loadmetasql file="client/metasql/retailcustomer-fetchcustnumber.mql" />
  <loadmetasql file="client/metasql/retailcustomer-getcrmacct.mql" />
  <loadmetasql file="client/metasql/retailcustomer-getcustid.mql" />
  <loadmetasql file="client/metasql/retailcustomer-releasecrmnumber.mql" />
  <loadmetasql file="client/metasql/retailsite-getapi_retailsite.mql" />
  <loadmetasql file="client/metasql/retailsite-getapi_retailsiteterminal.mql" />
  <loadmetasql file="client/metasql/retailsite-getbankaccnt.mql" />
  <loadmetasql file="client/metasql/sale-fetchcustcontact.mql" />
  <loadmetasql file="client/metasql/sale-fetchsalenumber.mql" />
  <loadmetasql file="client/metasql/sale-fetchsalesrep.mql" />
  <loadmetasql file="client/metasql/sale-fetchtaxzone.mql" />
  <loadmetasql file="client/metasql/sale-getapi_sale.mql" />
  <loadmetasql file="client/metasql/sale-getapi_saleitem.mql" />
  <loadmetasql file="client/metasql/sale-itemprice.mql" />
  <loadmetasql file="client/metasql/sale-releasesalenumber.mql" />
  <loadmetasql file="client/metasql/sale-saleitemtax.mql" />
  <loadmetasql file="client/metasql/salereceipt-detail.mql" />
  <loadmetasql file="client/metasql/salereceipt-payments.mql" />
  <loadmetasql file="client/metasql/salereceipt-totals.mql" />
  <loadmetasql file="client/metasql/salesearch-defaultdates.mql" />

</package>
