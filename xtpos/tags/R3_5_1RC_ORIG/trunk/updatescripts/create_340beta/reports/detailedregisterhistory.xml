<!DOCTYPE openRPTDef>
<report>
 <title>Detailed Register History</title>
 <name>DetailedRegisterHistory</name>
 <description>Detailed history of cash register activity.</description>
 <size>Letter</size>
 <portrait/>
 <topmargin>50</topmargin>
 <bottommargin>50</bottommargin>
 <rightmargin>50</rightmargin>
 <leftmargin>50</leftmargin>
 <querysource loadFromDb="true" >
  <name>detail</name>
  <mqlgroup>display</mqlgroup>
  <mqlname>detailedRegisterHistory</mqlname>
 </querysource>
 <querysource>
  <name>header</name>
  <sql>SELECT formatDate(&lt;? value("startDate" ?>, 'Earliest') AS start,
       formatDate(&lt;? value("endDate"   ?>, 'Latest')   AS end,
       &lt;? if exists("warehous_id") ?> warehous_code &lt;? else ?> 'ALL' &lt;? endif ?> AS site,
       &lt;? if exists("terminal_id") ?> terminal_number &lt;? else ?> 'ALL' &lt;? endif ?> AS terminal

&lt;? if exists("warehous_id") ?>
  FROM whsinfo
  &lt;? if exists("terminal_id") ?>
    , xtpos.terminal
  &lt;? endif ?>
&lt;? elseif exists ("terminal_id") ?>
  FROM xtpos.terminal
&lt;? endif ?>

WHERE TRUE
&lt;? if exists("warehous_id") ?>
  AND (warehous_id=&lt;? value("warehous_id") ?>)
&lt;? endif ?>
&lt;? if exists("terminal_id") ?>
  AND (terminal_id=&lt;? value("terminal_id") ?>)
&lt;? endif ?>
LIMIT 1;</sql>
 </querysource>
 <pghead>
  <height>165</height>
  <label>
   <rect>
    <x>443</x>
    <y>9.09091</y>
    <width>294.955</width>
    <height>25</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>16</size>
    <weight>bold</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Detailed Register Report</string>
  </label>
  <label>
   <rect>
    <x>519</x>
    <y>50</y>
    <width>100</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Site:</string>
  </label>
  <label>
   <rect>
    <x>520</x>
    <y>63</y>
    <width>100</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Terminal:</string>
  </label>
  <label>
   <rect>
    <x>520</x>
    <y>76</y>
    <width>100</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <right/>
   <vcenter/>
   <string>From:</string>
  </label>
  <label>
   <rect>
    <x>520</x>
    <y>89</y>
    <width>100</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <right/>
   <vcenter/>
   <string>To:</string>
  </label>
  <field>
   <rect>
    <x>623.944</x>
    <y>50</y>
    <width>100</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>header</query>
    <column>site</column>
   </data>
  </field>
  <field>
   <rect>
    <x>624.519</x>
    <y>63</y>
    <width>100</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>header</query>
    <column>terminal</column>
   </data>
  </field>
  <field>
   <rect>
    <x>624.519</x>
    <y>76</y>
    <width>100</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>header</query>
    <column>start</column>
   </data>
  </field>
  <field>
   <rect>
    <x>624.232</x>
    <y>89</y>
    <width>100</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>header</query>
    <column>end</column>
   </data>
  </field>
  <label>
   <rect>
    <x>10.5</x>
    <y>116.088</y>
    <width>100</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Site:</string>
  </label>
  <field>
   <rect>
    <x>137</x>
    <y>116.088</y>
    <width>100</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>detail</query>
    <column>warehous_code</column>
   </data>
  </field>
  <label>
   <rect>
    <x>640</x>
    <y>151</y>
    <width>60</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Line Tax</string>
  </label>
  <label>
   <rect>
    <x>240.029</x>
    <y>151.088</y>
    <width>60</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>User/Item</string>
  </label>
  <label>
   <rect>
    <x>240</x>
    <y>136</y>
    <width>60</width>
    <height>13.8</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Sales Rep/</string>
  </label>
  <label>
   <rect>
    <x>125.029</x>
    <y>151.088</y>
    <width>110</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Date &amp; Time</string>
  </label>
  <label>
   <rect>
    <x>60</x>
    <y>149</y>
    <width>60</width>
    <height>14.7</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Transaction</string>
  </label>
  <label>
   <rect>
    <x>407.058</x>
    <y>116.088</y>
    <width>100</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Terminal:</string>
  </label>
  <field>
   <rect>
    <x>517.971</x>
    <y>116.088</y>
    <width>100</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>detail</query>
    <column>terminal_number</column>
   </data>
  </field>
  <label>
   <rect>
    <x>498.985</x>
    <y>137.378</y>
    <width>98</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Register Cash</string>
  </label>
  <label>
   <rect>
    <x>301.029</x>
    <y>148.864</y>
    <width>125</width>
    <height>14.724</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Customer/Description</string>
  </label>
  <label>
   <rect>
    <x>423</x>
    <y>151</y>
    <width>75</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Line Total</string>
  </label>
  <label>
   <rect>
    <x>422.985</x>
    <y>137.378</y>
    <width>75</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Tendered/</string>
  </label>
  <label>
   <rect>
    <x>510</x>
    <y>151</y>
    <width>60</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Unit Price</string>
  </label>
  <label>
   <rect>
    <x>578.073</x>
    <y>151.088</y>
    <width>60</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Qty</string>
  </label>
  <label>
   <rect>
    <x>599.015</x>
    <y>137.378</y>
    <width>75</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Transfer</string>
  </label>
  <label>
   <rect>
    <x>675</x>
    <y>137.378</y>
    <width>75</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Adjustment</string>
  </label>
  <line>
   <xstart>12.0584</xstart>
   <ystart>131.088</ystart>
   <xend>742.058</xend>
   <yend>131.088</yend>
   <weight>3</weight>
  </line>
 </pghead>
 <section>
  <name>detail</name>
  <group>
   <name>Terminal</name>
   <column>terminal_id</column>
   <pagebreak when="after foot" />
   <head>
    <height>18.3604</height>
   </head>
   <foot>
    <height>20</height>
   </foot>
  </group>
  <group>
   <name>spacer</name>
   <column>f_timestamp</column>
   <head>
    <height>9.44485</height>
    <line>
     <xstart>20</xstart>
     <ystart>3.15142</ystart>
     <xend>750</xend>
     <yend>3.15142</yend>
     <weight>0</weight>
    </line>
   </head>
   <foot>
    <height>12.5332</height>
   </foot>
  </group>
  <detail>
   <key>
    <query>detail</query>
   </key>
   <height>18.3076</height>
   <field>
    <rect>
     <x>125</x>
     <y>-6.32827e-15</y>
     <width>110</width>
     <height>12.5</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>f_timestamp</column>
    </data>
   </field>
   <field>
    <rect>
     <x>5</x>
     <y>-6.32827e-15</y>
     <width>50</width>
     <height>12.5</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>type</column>
    </data>
   </field>
   <field>
    <rect>
     <x>60</x>
     <y>-6.32827e-15</y>
     <width>60</width>
     <height>12.5</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>transaction</column>
    </data>
   </field>
   <field>
    <rect>
     <x>240</x>
     <y>7.10541e-15</y>
     <width>60</width>
     <height>12.5</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>usrrepitem</column>
    </data>
   </field>
   <field>
    <rect>
     <x>423</x>
     <y>6.32827e-15</y>
     <width>75</width>
     <height>12.5</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>f_tendered</column>
    </data>
   </field>
   <field>
    <rect>
     <x>510</x>
     <y>-6.21725e-15</y>
     <width>60</width>
     <height>12.5</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>checkunit_qtdisplayrole</column>
    </data>
   </field>
   <field>
    <rect>
     <x>578</x>
     <y>-6.21725e-15</y>
     <width>60</width>
     <height>12.5</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>f_qtyNCard</column>
    </data>
   </field>
   <field>
    <rect>
     <x>499</x>
     <y>4</y>
     <width>98</width>
     <height>12.5</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>f_cashslsamt</column>
    </data>
   </field>
   <field>
    <rect>
     <x>599</x>
     <y>4</y>
     <width>75</width>
     <height>12.5</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>f_transferamt</column>
    </data>
   </field>
   <field>
    <rect>
     <x>675</x>
     <y>4</y>
     <width>75</width>
     <height>12.5</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>f_adjustamt</column>
    </data>
   </field>
   <field>
    <rect>
     <x>639.527</x>
     <y>0</y>
     <width>60</width>
     <height>12.5</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>f_linetax</column>
    </data>
   </field>
   <field>
    <rect>
     <x>301</x>
     <y>0</y>
     <width>125</width>
     <height>12.5</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>descrip</column>
    </data>
   </field>
  </detail>
 </section>
 <pgfoot>
  <height>27.6102</height>
  <label>
   <rect>
    <x>619.239</x>
    <y>16.7789</y>
    <width>11.4</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>of</string>
  </label>
  <field>
   <rect>
    <x>81.5789</x>
    <y>16.7789</y>
    <width>100</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>Context Query</query>
    <column>report_date</column>
   </data>
  </field>
  <field>
   <rect>
    <x>560</x>
    <y>16.8</y>
    <width>57.6</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <data>
    <query>Context Query</query>
    <column>page_number</column>
   </data>
  </field>
  <field>
   <rect>
    <x>635</x>
    <y>16.8</y>
    <width>73.2</width>
    <height>12.5</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Context Query</query>
    <column>page_count</column>
   </data>
  </field>
 </pgfoot>
</report>
