<package id="resources"
         name="te"
         developer="xTuple"
         descrip="Time and Expense System Lite"
         version="1.0.8"
         updater="2.2.0">
  <pkgnotes>Time and Expense System Lite add-on package for xTuple ERP.

        This file is part of the te package for xTuple ERP: PostBooks Edition,
        a free and open source Enterprise Resource Planning software suite,
        Copyright (c) 1999-2010 by OpenMFG LLC, d/b/a xTuple.
        It is licensed to you under the Common Public Attribution License
        version 1.0, the full text of which (including xTuple-specific Exhibits)
        is available at www.xtuple.com/CPAL.  By using this software, you agree
        to be bound by its terms.
  </pkgnotes>

  <prerequisite type="Query"
                name="xTuple ERP version">
    <query>
      SELECT (SUBSTRING(fetchMetricText('ServerVersion') FOR 1) > '3') 
          OR (SUBSTRING(fetchMetricText('ServerVersion') FOR 1) = '3'
          AND SUBSTRING(fetchMetricText('ServerVersion') FROM 3 FOR 1) >= '5');
    </query>
    <message>
      This version of the te package only works with xTuple ERP
      versions 3.5.0 and greater.
    </message>
  </prerequisite>

  <prerequisite type="license" name="Core Services Group EULA">
    <message>
      &lt;p>
END-USER LICENSE AGREEMENT FOR "CORE TIME AND EXPENSE - xTuple ADDON" 
IMPORTANT 
PLEASE READ THE TERMS AND CONDITIONS OF THIS LICENSE AGREEMENT CAREFULLY 
BEFORE CONTINUING WITH THIS PROGRAM INSTALL: Core Services Group, LLC 
End-User License Agreement ("EULA") is a legal agreement between you 
(either an individual or a single entity) and Core Services Group, LLC. 
for the Core Services Group, LLC software product(s) identified above 
which may include associated software components, media, printed materials, 
and "online" or electronic documentation ("SOFTWARE PRODUCT"). 
By installing, copying, or otherwise using the SOFTWARE PRODUCT, you agree 
to be bound by the terms of this EULA. This license agreement represents the 
entire agreement concerning the program between you and Core Services Group, LLC, 
(referred to as "licenser"), and it supersedes any prior proposal, 
representation, or understanding between the parties. If you do not agree to 
the terms of this EULA, do not install or use the SOFTWARE PRODUCT.

The SOFTWARE PRODUCT is protected by copyright laws and international copyright treaties, 
as well as other intellectual property laws and treaties. The SOFTWARE PRODUCT is licensed, not sold.

1. GRANT OF LICENSE. 
The SOFTWARE PRODUCT is licensed as follows: 
(a) Installation and Use.
Core Services Group, LLC grants you the right to install and use copies of the SOFTWARE PRODUCT on 
your computer running a validly licensed copy of the operating system for which the SOFTWARE PRODUCT 
was designed [e.g., Windows 95, Windows NT, Windows 98, Windows 2000, Windows 2003, 
Windows XP, Windows ME, Windows Vista].
(b) Backup Copies.
You may also make copies of the SOFTWARE PRODUCT as may be necessary for backup and archival purposes.

2. DESCRIPTION OF OTHER RIGHTS AND LIMITATIONS.
(a) Maintenance of Copyright Notices.
You must not remove or alter any copyright notices on any and all copies of the SOFTWARE PRODUCT.
(b) Distribution.
You may not distribute registered copies of the SOFTWARE PRODUCT to third parties. 
(c) Prohibition on Reverse Engineering, Decompilation, and Disassembly.
You may not reverse engineer, decompile, or disassemble the SOFTWARE PRODUCT, except and only to the 
extent that such activity is expressly permitted by applicable law notwithstanding this limitation. 
(d) Rental.
You may not rent, lease, or lend the SOFTWARE PRODUCT.
(e) Support Services.
Core Services Group, LLC may provide you with support services related to the SOFTWARE PRODUCT ("Support Services"). 
Any supplemental software code provided to you as part of the Support Services shall be considered part of the 
SOFTWARE PRODUCT and subject to the terms and conditions of this EULA. 
(f) Compliance with Applicable Laws.
You must comply with all applicable laws regarding use of the SOFTWARE PRODUCT.

3. TERMINATION 
Without prejudice to any other rights, Core Services Group, LLC may terminate this EULA if you fail to comply 
with the terms and conditions of this EULA. In such event, you must destroy all copies of the SOFTWARE PRODUCT 
in your possession.

4. COPYRIGHT
All title, including but not limited to copyrights, in and to the SOFTWARE PRODUCT and any copies thereof are owned 
by Core Services Group, LLC or its suppliers. All title and intellectual property rights in and to the content which 
may be accessed through use of the SOFTWARE PRODUCT is the property of the respective content owner and may be 
protected by applicable copyright or other intellectual property laws and treaties. This EULA grants you no rights 
to use such content. All rights not expressly granted are reserved by Core Services Group, LLC.

5. NO WARRANTIES
Core Services Group, LLC expressly disclaims any warranty for the SOFTWARE PRODUCT. The SOFTWARE PRODUCT is 
provided 'As Is' without any express or implied warranty of any kind, including but not limited to any warranties 
of merchantability, noninfringement, or fitness of a particular purpose. Core Services Group, LLC does not warrant 
or assume responsibility for the accuracy or completeness of any information, text, graphics, links or other items 
contained within the SOFTWARE PRODUCT. Core Services Group, LLC makes no warranties respecting any harm that may be 
caused by the transmission of a computer virus, worm, time bomb, logic bomb, or other such computer program. 
Core Services Group, LLC further expressly disclaims any warranty or representation to Authorized Users or to 
any third party.

6. LIMITATION OF LIABILITY
In no event shall Core Services Group, LLC be liable for any damages (including, without limitation, lost profits, 
business interruption, or lost information) rising out of 'Authorized Users' use of or inability to use the SOFTWARE PRODUCT, 
even if Core Services Group, LLC has been advised of the possibility of such damages. In no event will 
Core Services Group, LLC be liable for loss of data or for indirect, special, incidental, consequential (including lost profit), 
or other damages based in contract, tort or otherwise. Core Services Group, LLC shall have no liability with respect to the 
content of the SOFTWARE PRODUCT or any part thereof, including but not limited to errors or omissions contained therein, 
libel, infringements of rights of publicity, privacy, trademark rights, business interruption, personal injury, loss of privacy, 
moral rights or the disclosure of confidential information.

      &lt;/p>
    </message>
  </prerequisite>
  
  <script file="database/misc/timesequence.sql" />  
  <script file="database/misc/schemaComment.sql" />
  <script file="database/misc/cons_seq.sql" />
  <script file="database/misc/insertIntopriv.sql"           onerror="Prompt" />
  <script file="database/functions/addsheet2.sql"           onerror="Prompt"/>
  <script file="database/functions/getprjcustid2.sql"       onerror="Prompt"/>

  <createfunction file="database/functions/addsheet.sql"        name="addsheet" />
  <createfunction file="database/functions/addtecustrate.sql"   name="addtecustrate"/>
  <createfunction file="database/functions/addteemprate.sql"    name="addteemprate" />
  <createfunction file="database/functions/addteprj.sql"        name="addteprj" />
  <createfunction file="database/functions/addteprjtask.sql"    name="addteprjtask" />
  <createfunction file="database/functions/deleteline.sql"      name="deleteline" />
  <createfunction file="database/functions/deletesheet.sql"     name="deletesheet" />
  <createfunction file="database/functions/getsheetid.sql"      name="getsheetid" />
  <createfunction file="database/functions/setmetric.sql"       name="setmetric" />
  <createfunction file="database/functions/maxline.sql"         name="maxline" />
  <createfunction file="database/functions/minline.sql"         name="minline" />
  <createfunction file="database/functions/getprjcustid.sql"    name="getprjcustid" />
  <createfunction file="database/functions/approvesheet.sql"    name="approvesheet" />


  <createtable file="database/tables/createtecustrate.sql"      name="tecustrate"/>
  <createtable file="database/tables/createteemprate.sql"       name="teemprate"/>
  <createtable file="database/tables/createteexp.sql"           name="teexp"/>
  <createtable file="database/tables/createtehead.sql"          name="tehead"/>
  <createtable file="database/tables/createteitem.sql"          name="teitem"/>
  <createtable file="database/tables/createtemetric.sql"        name="temetric"/>
  <createtable file="database/tables/createteprj.sql"           name="teprj"/>
  <createtable file="database/tables/createteprjtask.sql"       name="teprjtask"/>
  <createtable file="database/tables/createteselect.sql"        name="teselect"/>

  <finalscript file="database/misc/sequencegrants.sql" />

  <loadappscript file="client/scripts/customer.js"              name="customer"     order="0"/>
  <loadappscript file="client/scripts/copyItem.js"            	name="copyItem"     order="0"/>
  <loadappscript file="client/scripts/item.js"                  name="item"         order="0"/>
  <loadappscript file="client/scripts/task.js"           	name="task"    	    order="0"/>
  <loadappscript file="client/scripts/te.js"             	name="te"           order="0"/>
  <loadappscript file="client/scripts/tebilling.js"             name="tebilling"    order="0"/>
  <loadappscript file="client/scripts/tesheet.js"               name="tesheet"      order="0"/>
  <loadappscript file="client/scripts/time_expense.js"          name="time_expense" order="0"/>

  <loadappscript file="client/scripts/initMenu.js"              name="initMenu"     order="0"/> 
  
  <loadappui file="client/uiforms/expense.ui"                   order="0" />
  
  <loadappui file="client/uiforms/te.ui"                        order="0" />
  <loadappui file="client/uiforms/tebilling.ui"       		order="0" />
  <loadappui file="client/uiforms/tebillingemp.ui"       	order="0" />
  <loadappui file="client/uiforms/tesheet.ui"                   order="0" />
  <loadappui file="client/uiforms/time_expense.ui"              order="0" />
  
  <loadmetasql file="client/metasql/addsheet.mql" />
  <loadmetasql file="client/metasql/addtecustrate.mql" />
  <loadmetasql file="client/metasql/addteemprate.mql" />
  <loadmetasql file="client/metasql/addteprj.mql" />
  <loadmetasql file="client/metasql/addteprjtask.mql" />
  <loadmetasql file="client/metasql/editsheet.mql" />
  <loadmetasql file="client/metasql/getsheet.mql" />
  <loadmetasql file="client/metasql/gettask.mql" />

  <loadreport  file="client/reports/opensheetlist.xml" />
  <loadreport  file="client/reports/expensereport.xml" />
</package>
