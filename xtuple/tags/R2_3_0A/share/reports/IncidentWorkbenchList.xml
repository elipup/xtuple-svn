<!DOCTYPE openRPTDef>
<report>
 <title>Incident List</title>
 <name>IncidentWorkbenchList</name>
 <description></description>
 <size>Letter</size>
 <portrait/>
 <topmargin>50</topmargin>
 <bottommargin>50</bottommargin>
 <rightmargin>50</rightmargin>
 <leftmargin>50</leftmargin>
 <querysource>
  <name>detail</name>
  <sql>SELECT incdt_id,
       incdt_number,
       crmacct_name,
       CASE WHEN(incdt_status='N') THEN &lt;? value("new") ?>
            WHEN(incdt_status='F') THEN &lt;? value("feedback") ?>
            WHEN(incdt_status='C') THEN &lt;? value("confirmed") ?>
            WHEN(incdt_status='A') THEN &lt;? value("assigned") ?>
            WHEN(incdt_status='R') THEN &lt;? value("resolved") ?>
            WHEN(incdt_status='L') THEN &lt;? value("closed") ?>
            ELSE incdt_status
       END AS incdt_status,
       incdt_assigned_username,
       incdt_summary,
       incdt_descrip,
       DATE(incdt_timestamp) AS incdt_timestamp,
       incdtseverity_name,
       incdtpriority_name
  FROM (crmacct JOIN incdt ON (crmacct_id=incdt_crmacct_id)
        LEFT OUTER JOIN incdtseverity ON (incdt_incdtseverity_id = incdtseverity_id))
        LEFT OUTER JOIN incdtpriority ON (incdt_incdtpriority_id = incdtpriority_id)
 WHERE (true
 &lt;? if exists("usr_id") ?> 
 AND (incdt_assigned_username IN (SELECT usr_username FROM usr
                     WHERE usr_id = &lt;? value("usr_id") ?>))  
 &lt;? elseif exists("usr_pattern") ?> 
 AND (incdt_assigned_username ~* &lt;? value("usr_pattern") ?>)
 &lt;? endif ?>
 AND (incdt_status IN ('' 
   &lt;? if exists("isnew") ?>,           'N' &lt;? endif ?>
   &lt;? if exists("isfeedback") ?>,      'F' &lt;? endif ?>
   &lt;? if exists("isconfirmed") ?>,     'C' &lt;? endif ?>
   &lt;? if exists("isassigned") ?>,      'A' &lt;? endif ?>
   &lt;? if exists("isresolved") ?>,      'R' &lt;? endif ?> 
   &lt;? if exists("isclosed") ?>,        'L' &lt;? endif ?> 
 )) 
 &lt;? if exists("pattern") ?> 
 AND ((incdt_summary ~* &lt;? value("pattern") ?>)
  OR  (incdt_descrip ~* &lt;? value("pattern") ?>)
  OR  (incdt_id IN (SELECT comment_source_id
            FROM comment
            WHERE ((comment_source='INCDT') AND (comment_text ~* &lt;? value("pattern") ?>)))))
 &lt;? endif ?>
 AND (incdt_timestamp BETWEEN &lt;? value("startDate") ?>
                          AND &lt;? value("endDate") ?>) 
) ORDER BY incdt_number; 
</sql>
 </querysource>
 <querysource>
  <name>username</name>
  <sql>SELECT
  &lt;? if exists("usr_id") ?>
    usr_username AS usr
    FROM usr
    WHERE (usr_id=&lt;? value("usr_id") ?>)
  &lt;? elseif exists("usr_pattern") ?>
    &lt;? value("usr_pattern") ?>
  &lt;? else ?>
    'ALL' AS usr
  &lt;? endif ?>
;</sql>
 </querysource>
 <rpthead>
  <height>122</height>
  <line>
   <xstart>1</xstart>
   <ystart>114</ystart>
   <xend>741</xend>
   <yend>114</yend>
   <weight>2</weight>
  </line>
  <field>
   <rect>
    <x>300</x>
    <y>60</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>9</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Parameter Query</query>
    <column>endDate</column>
   </data>
  </field>
  <field>
   <rect>
    <x>135</x>
    <y>45</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>9</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>username</query>
    <column>usr</column>
   </data>
  </field>
  <label>
   <rect>
    <x>560</x>
    <y>100</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Created</string>
  </label>
  <label>
   <rect>
    <x>295</x>
    <y>10</y>
    <width>450</width>
    <height>37</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>18</size>
    <weight>bold</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Incident List</string>
  </label>
  <label>
   <rect>
    <x>5</x>
    <y>45</y>
    <width>125</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>User:</string>
  </label>
  <label>
   <rect>
    <x>10</x>
    <y>100</y>
    <width>60</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Incident</string>
  </label>
  <label>
   <rect>
    <x>690</x>
    <y>100</y>
    <width>50</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Priority</string>
  </label>
  <label>
   <rect>
    <x>180</x>
    <y>100</y>
    <width>50</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Status</string>
  </label>
  <label>
   <rect>
    <x>320</x>
    <y>100</y>
    <width>230</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Summary</string>
  </label>
  <label>
   <rect>
    <x>5</x>
    <y>60</y>
    <width>125</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Create Date between:</string>
  </label>
  <field>
   <rect>
    <x>135</x>
    <y>60</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>9</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Parameter Query</query>
    <column>startDate</column>
   </data>
  </field>
  <label>
   <rect>
    <x>240</x>
    <y>100</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Assigned To</string>
  </label>
  <label>
   <rect>
    <x>65</x>
    <y>101</y>
    <width>110</width>
    <height>11</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>CRM Account</string>
  </label>
  <label>
   <rect>
    <x>240</x>
    <y>60</y>
    <width>50</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>and</string>
  </label>
  <label>
   <rect>
    <x>640</x>
    <y>100</y>
    <width>50</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Severity</string>
  </label>
 </rpthead>
 <pghead>
  <firstpage/>
  <height>5</height>
 </pghead>
 <pghead>
  <height>21</height>
  <label>
   <rect>
    <x>690</x>
    <y>0</y>
    <width>50</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Priority</string>
  </label>
  <label>
   <rect>
    <x>560</x>
    <y>0</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Created</string>
  </label>
  <label>
   <rect>
    <x>640</x>
    <y>0</y>
    <width>50</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Severity</string>
  </label>
  <label>
   <rect>
    <x>10</x>
    <y>0</y>
    <width>60</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Incident</string>
  </label>
  <label>
   <rect>
    <x>65</x>
    <y>0</y>
    <width>110</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>CRM Account</string>
  </label>
  <line>
   <xstart>5</xstart>
   <ystart>15</ystart>
   <xend>745</xend>
   <yend>15</yend>
   <weight>2</weight>
  </line>
  <label>
   <rect>
    <x>240</x>
    <y>0</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Assigned To</string>
  </label>
  <label>
   <rect>
    <x>320</x>
    <y>0</y>
    <width>230</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Summary</string>
  </label>
  <label>
   <rect>
    <x>180</x>
    <y>0</y>
    <width>50</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Status</string>
  </label>
 </pghead>
 <section>
  <name>detail</name>
  <group>
   <name>ByUser</name>
   <column>usr_username</column>
  </group>
  <detail>
   <key>
    <query>detail</query>
   </key>
   <height>28</height>
   <field>
    <rect>
     <x>320</x>
     <y>0</y>
     <width>230</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <top/>
    <data>
     <query>detail</query>
     <column>incdt_summary</column>
    </data>
   </field>
   <field>
    <rect>
     <x>65</x>
     <y>0</y>
     <width>110</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <top/>
    <data>
     <query>detail</query>
     <column>crmacct_name</column>
    </data>
   </field>
   <field>
    <rect>
     <x>240</x>
     <y>0</y>
     <width>75</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <top/>
    <data>
     <query>detail</query>
     <column>incdt_assigned_username</column>
    </data>
   </field>
   <field>
    <rect>
     <x>180</x>
     <y>0</y>
     <width>50</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <top/>
    <data>
     <query>detail</query>
     <column>incdt_status</column>
    </data>
   </field>
   <field>
    <rect>
     <x>690</x>
     <y>0</y>
     <width>50</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <top/>
    <data>
     <query>detail</query>
     <column>incdtpriority_name</column>
    </data>
   </field>
   <field>
    <rect>
     <x>560</x>
     <y>0</y>
     <width>75</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <top/>
    <data>
     <query>detail</query>
     <column>incdt_timestamp</column>
    </data>
   </field>
   <field>
    <rect>
     <x>640</x>
     <y>0</y>
     <width>50</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <top/>
    <data>
     <query>detail</query>
     <column>incdtseverity_name</column>
    </data>
   </field>
   <field>
    <rect>
     <x>10</x>
     <y>0</y>
     <width>60</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <top/>
    <data>
     <query>detail</query>
     <column>incdt_number</column>
    </data>
   </field>
   <text>
    <rect>
     <x>320</x>
     <y>15</y>
     <width>430</width>
     <height>15</height>
    </rect>
    <bottompad>0</bottompad>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <top/>
    <data>
     <query>detail</query>
     <column>incdt_descrip</column>
    </data>
   </text>
  </detail>
 </section>
 <pgfoot>
  <height>15</height>
  <label>
   <rect>
    <x>615</x>
    <y>0</y>
    <width>85</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Page:</string>
  </label>
  <label>
   <rect>
    <x>0</x>
    <y>0</y>
    <width>85</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Report Date:</string>
  </label>
  <field>
   <rect>
    <x>90</x>
    <y>0</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Context Query</query>
    <column>report_date</column>
   </data>
  </field>
  <field>
   <rect>
    <x>705</x>
    <y>0</y>
    <width>40</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Context Query</query>
    <column>page_number</column>
   </data>
  </field>
 </pgfoot>
</report>
