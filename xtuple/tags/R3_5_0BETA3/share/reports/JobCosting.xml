<!DOCTYPE openRPTDef>
<report>
 <title>Job Costing</title>
 <name>JobCosting</name>
 <description></description>
 <size>Letter</size>
 <portrait/>
 <topmargin>50</topmargin>
 <bottommargin>50</bottommargin>
 <rightmargin>50</rightmargin>
 <leftmargin>50</leftmargin>
 <querysource>
  <name>head</name>
  <sql>SELECT formatwonumber(&lt;? value("wo_id") ?>) AS wonumber;
    </sql>
 </querysource>
 <querysource>
  <name>detail</name>
  <sql>SELECT  
  id,
  sort,
  type,
  code,
  descrip,
  f_qty,
  uom,
  f_cost,
  cost
FROM (
&lt;? if exists("showsu") ?>	
SELECT wooper_id AS id,1 AS sort,&lt;? value("setup") ?> AS type, wrkcnt_code AS code, wooper_descrip1 AS descrip,                                             
  formatqty(SUM(COALESCE(wooperpost_sutime,0))/60) AS f_qty,&lt;? value("timeuom") ?> AS uom,  
  formatCost(SUM(COALESCE(wooperpost_sucost,0))) as f_cost, wooper_seqnumber, 
  SUM(COALESCE(wooperpost_sucost,0)) AS cost 
FROM wooper 
  LEFT OUTER JOIN wooperpost ON (wooper_id=wooperpost_wooper_id), 
  wrkcnt 
WHERE ((wooper_wo_id=&lt;? value("wo_id") ?>) 
AND (wooper_wrkcnt_id=wrkcnt_id)) 
GROUP BY wooper_id, wrkcnt_code, wooper_descrip1, wooper_seqnumber
&lt;? endif ?>
&lt;? if exists("showrt") ?>
  &lt;? if exists("showsu") ?>
UNION
  &lt;? endif ?>
SELECT wooper_id AS id,2 AS sort,&lt;? value("runtime") ?> AS type, wrkcnt_code AS code, wooper_descrip1 AS descrip, 
  formatqty(SUM(COALESCE(wooperpost_rntime,0))/60) AS f_qty,&lt;? value("timeuom") ?> AS uom, 
  formatCost(SUM(COALESCE(wooperpost_rncost,0))) AS f_cost, wooper_seqnumber, 
  SUM(COALESCE(wooperpost_rncost,0)) AS cost 
FROM wooper 
  LEFT OUTER JOIN wooperpost ON (wooper_id=wooperpost_wooper_id), 
  wrkcnt 
WHERE ((wooper_wo_id=&lt;? value("wo_id") ?>) 
AND (wooper_wrkcnt_id=wrkcnt_id)) 
GROUP BY wooper_id, wrkcnt_code, wooper_descrip1, wooper_seqnumber 
&lt;? endif ?>
&lt;? if exists("showmatl") ?>
  &lt;? if exists("showsu") ?>
UNION
  &lt;? elseif exists("showrt") ?>
UNION
  &lt;? endif ?>
SELECT womatl_id AS id,3 AS sort,&lt;? value("material") ?> AS type, item_number AS code, item_descrip1 AS descrip, 
  formatqty(SUM(COALESCE(invhist_invqty,0))) AS f_qty,uom_name AS uom, 
  formatCost(SUM(COALESCE(invhist_invqty * invhist_unitcost,0))) AS f_cost, 
  NULL as wooper_seqnumber, SUM(COALESCE(invhist_invqty * invhist_unitcost,0)) AS cost 
  FROM womatl 
    LEFT OUTER JOIN womatlpost ON (womatl_id=womatlpost_womatl_id) 
    LEFT OUTER JOIN invhist ON (womatlpost_invhist_id=invhist_id), 
  itemsite, item, uom 
  WHERE ((womatl_wo_id=&lt;? value("wo_id") ?>) 
  AND (womatl_itemsite_id=itemsite_id) 
  AND (itemsite_item_id=item_id) 
  AND (item_inv_uom_id=uom_id)) 
  GROUP BY womatl_id, item_number, item_descrip1, uom_name
&lt;? endif ?>
) AS data ORDER BY
&lt;? if exists("showsu") ?>
wooper_seqnumber,
&lt;? elseif exists("showrt") ?>
wooper_seqnumber,
&lt;? endif ?>
sort,code;</sql>
 </querysource>
 <rpthead>
  <height>141</height>
  <label>
   <rect>
    <x>635</x>
    <y>115</y>
    <width>40</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>UOM</string>
  </label>
  <label>
   <rect>
    <x>35</x>
    <y>70</y>
    <width>80</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Work Order:</string>
  </label>
  <label>
   <rect>
    <x>80</x>
    <y>115</y>
    <width>219</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Work Center/Item</string>
  </label>
  <line>
   <xstart>0</xstart>
   <ystart>135</ystart>
   <xend>740</xend>
   <yend>135</yend>
   <weight>2</weight>
  </line>
  <label>
   <rect>
    <x>305</x>
    <y>115</y>
    <width>229</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Description</string>
  </label>
  <label>
   <rect>
    <x>675</x>
    <y>115</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Cost</string>
  </label>
  <label>
   <rect>
    <x>555</x>
    <y>115</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Qty.</string>
  </label>
  <label>
   <rect>
    <x>15</x>
    <y>115</y>
    <width>50</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Type</string>
  </label>
  <field>
   <rect>
    <x>120</x>
    <y>70</y>
    <width>200</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>wonumber</column>
   </data>
  </field>
  <label>
   <rect>
    <x>375</x>
    <y>10</y>
    <width>350</width>
    <height>40</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>18</size>
    <weight>bold</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Work Order Costing</string>
  </label>
 </rpthead>
 <pghead>
  <firstpage/>
  <height>9</height>
 </pghead>
 <pghead>
  <height>29</height>
  <label>
   <rect>
    <x>675</x>
    <y>0</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Cost</string>
  </label>
  <label>
   <rect>
    <x>85</x>
    <y>0</y>
    <width>214</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Work Center/Item</string>
  </label>
  <label>
   <rect>
    <x>300</x>
    <y>0</y>
    <width>229</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Description</string>
  </label>
  <label>
   <rect>
    <x>640</x>
    <y>0</y>
    <width>40</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>UOM</string>
  </label>
  <label>
   <rect>
    <x>555</x>
    <y>0</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Qty.</string>
  </label>
  <label>
   <rect>
    <x>10</x>
    <y>0</y>
    <width>50</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Type</string>
  </label>
  <line>
   <xstart>5</xstart>
   <ystart>20</ystart>
   <xend>745</xend>
   <yend>20</yend>
   <weight>2</weight>
  </line>
 </pghead>
 <section>
  <name>detail</name>
  <detail>
   <key>
    <query>detail</query>
   </key>
   <height>21</height>
   <line>
    <xstart>0</xstart>
    <ystart>20</ystart>
    <xend>740</xend>
    <yend>20</yend>
    <weight>0</weight>
   </line>
   <field>
    <rect>
     <x>630</x>
     <y>0</y>
     <width>38</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <hcenter/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>uom</column>
    </data>
   </field>
   <field>
    <rect>
     <x>80</x>
     <y>0</y>
     <width>219</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>code</column>
    </data>
   </field>
   <field>
    <rect>
     <x>305</x>
     <y>0</y>
     <width>229</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>descrip</column>
    </data>
   </field>
   <field>
    <rect>
     <x>15</x>
     <y>0</y>
     <width>55</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <hcenter/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>type</column>
    </data>
   </field>
   <field>
    <rect>
     <x>675</x>
     <y>0</y>
     <width>75</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <hcenter/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>f_cost</column>
    </data>
   </field>
   <field>
    <rect>
     <x>540</x>
     <y>0</y>
     <width>75</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>f_qty</column>
    </data>
   </field>
  </detail>
 </section>
 <pgfoot>
  <height>21</height>
  <label>
   <rect>
    <x>615</x>
    <y>0</y>
    <width>85</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Page:</string>
  </label>
  <label>
   <rect>
    <x>5</x>
    <y>0</y>
    <width>85</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Report Date:</string>
  </label>
  <field>
   <rect>
    <x>705</x>
    <y>0</y>
    <width>40</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Context Query</query>
    <column>page_number</column>
   </data>
  </field>
  <field>
   <rect>
    <x>95</x>
    <y>0</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Context Query</query>
    <column>report_date</column>
   </data>
  </field>
 </pgfoot>
 <rptfoot>
  <height>18</height>
  <field>
   <rect>
    <x>670</x>
    <y>0</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>detail</query>
    <column>cost</column>
   </data>
   <format builtin="true" >price</format>
   <tracktotal subtotal="true" />
  </field>
  <label>
   <rect>
    <x>0</x>
    <y>0</y>
    <width>60</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Total Cost:</string>
  </label>
 </rptfoot>
</report>
