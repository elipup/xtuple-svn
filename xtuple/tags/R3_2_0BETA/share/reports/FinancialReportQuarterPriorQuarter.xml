<!DOCTYPE openRPTDef>
<report>
 <title>Financial Report Quarter and Prior Quarter</title>
 <name>FinancialReportQuarterPriorQuarter</name>
 <description></description>
 <parameter default="" active="false" listtype="dynamic" type="integer" name="flcol_id" >
  <description>Financial Report Column Layout</description>
  <query>SELECT flcol_id, flhead_name || ' - ' || flcol_name FROM flcol, flhead WHERE ((flcol_flhead_id=flhead_id) AND (flhead_active))</query>
 </parameter>
 <parameter default="" active="false" listtype="dynamic" type="integer" name="period_id" >
  <description>Accounting Period Reference</description>
  <query>SELECT period_id, 
  CASE
    WHEN period_name &lt;> '' THEN period_name 
    ELSE (formatdate(period_start) || '-' || formatdate(period_end)) 
  END 
FROM period 
ORDER BY period_end DESC</query>
 </parameter>
 <size>Letter</size>
 <portrait/>
 <topmargin>50</topmargin>
 <bottommargin>50</bottommargin>
 <rightmargin>50</rightmargin>
 <leftmargin>50</leftmargin>
 <querysource>
  <name>head</name>
  <sql>SELECT 
    flstmthead_username,
    flstmthead_flhead_name || ' - ' || flstmthead_flcol_name AS f_name,
    flstmthead_typedescrip1,
    flstmthead_typedescrip2,
    flstmthead_typedescrip2 || ' Diff.' AS f_diff,
    flstmthead_typedescrip2 || ' % Diff.' AS f_diffprcnt,
    flstmthead_month,
    flstmthead_qtr,
    flstmthead_year,
    flstmthead_prmonth,
    flstmthead_prqtr,
    flstmthead_pryear
FROM getflstmthead(&lt;? value("flcol_id") ?>,&lt;? value("period_id") ?>)</sql>
 </querysource>
 <querysource>
  <name>detail</name>
  <sql>SELECT 
    flstmtitem_flhead_id,
    flstmtitem_period_id,
    flstmtitem_username,
    flstmtitem_order,
    flstmtitem_level,
    flstmtitem_subgrp,
    flstmtitem_type,
    flstmtitem_type_id,
    flstmtitem_parent_id,
    flstmtitem_accnt_id,
    flstmtitem_name,
    flstmtitem_month,
    flstmtitem_monthdb,
    flstmtitem_monthcr,
    flstmtitem_monthprcnt,
    flstmtitem_monthbudget,
    flstmtitem_monthbudgetprcnt,
    flstmtitem_monthbudgetdiff,
    flstmtitem_monthbudgetdiffprcnt,
    flstmtitem_qtr,
    flstmtitem_qtrdb,
    flstmtitem_qtrcr,
    flstmtitem_qtrprcnt,
    flstmtitem_qtrbudget,
    flstmtitem_qtrbudgetprcnt,
    flstmtitem_qtrbudgetdiff,
    flstmtitem_qtrbudgetdiffprcnt,
    flstmtitem_year,
    flstmtitem_yeardb,
    flstmtitem_yearcr,
    flstmtitem_yearprcnt,
    flstmtitem_yearbudget,
    flstmtitem_yearbudgetprcnt,
    flstmtitem_yearbudgetdiff,
    flstmtitem_yearbudgetdiffprcnt,
    flstmtitem_prmonth,
    flstmtitem_prmonthprcnt,
    flstmtitem_prmonthdiff,
    flstmtitem_prmonthdiffprcnt,
    flstmtitem_prqtr,
    flstmtitem_prqtrprcnt,
    flstmtitem_prqtrdiff,
    flstmtitem_prqtrdiffprcnt,
    flstmtitem_pryear,
    flstmtitem_pryearprcnt,
    flstmtitem_pryeardiff,
    flstmtitem_pryeardiffprcnt
FROM financialreport(&lt;? value("flcol_id") ?>,&lt;? value("period_id") ?>,
&lt;? if exists("shownumbers") ?>
  true
&lt;? else ?>
  false
&lt;? endif ?>
,True)
&lt;? if not exists("showzeros") ?>
  WHERE ((flstmtitem_qtr &lt;> formatMoney(0)) OR (flstmtitem_prqtr &lt;> formatMoney(0)) OR (flstmtitem_type &lt;> 'I'))
&lt;? endif ?>
;</sql>
 </querysource>
 <rpthead>
  <height>167</height>
  <field>
   <rect>
    <x>380</x>
    <y>130</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>flstmthead_qtr</column>
   </data>
  </field>
  <field>
   <rect>
    <x>500</x>
    <y>145</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>flstmthead_typedescrip2</column>
   </data>
  </field>
  <field>
   <rect>
    <x>580</x>
    <y>145</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>f_diff</column>
   </data>
  </field>
  <field>
   <rect>
    <x>100</x>
    <y>100</y>
    <width>459</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>flstmthead_typedescrip1</column>
   </data>
  </field>
  <label>
   <rect>
    <x>15</x>
    <y>80</y>
    <width>80</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Name:</string>
  </label>
  <field>
   <rect>
    <x>500</x>
    <y>130</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>flstmthead_prqtr</column>
   </data>
  </field>
  <line>
   <xstart>10</xstart>
   <ystart>160</ystart>
   <xend>1000</xend>
   <yend>160</yend>
   <weight>2</weight>
  </line>
  <label>
   <rect>
    <x>15</x>
    <y>100</y>
    <width>80</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Type:</string>
  </label>
  <field>
   <rect>
    <x>580</x>
    <y>130</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>flstmthead_prqtr</column>
   </data>
  </field>
  <field>
   <rect>
    <x>660</x>
    <y>145</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>f_diffprcnt</column>
   </data>
  </field>
  <label>
   <rect>
    <x>1</x>
    <y>130</y>
    <width>55</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Name</string>
  </label>
  <label>
   <rect>
    <x>345</x>
    <y>10</y>
    <width>380</width>
    <height>37</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>18</size>
    <weight>bold</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Financial Report</string>
  </label>
  <field>
   <rect>
    <x>100</x>
    <y>80</y>
    <width>459</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>f_name</column>
   </data>
  </field>
  <field>
   <rect>
    <x>660</x>
    <y>130</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>flstmthead_prqtr</column>
   </data>
  </field>
  <field>
   <rect>
    <x>380</x>
    <y>145</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>flstmthead_typedescrip2</column>
   </data>
  </field>
 </rpthead>
 <pghead>
  <firstpage/>
  <height>4</height>
 </pghead>
 <pghead>
  <height>37</height>
  <field>
   <rect>
    <x>580</x>
    <y>0</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>flstmthead_prqtr</column>
   </data>
  </field>
  <field>
   <rect>
    <x>500</x>
    <y>15</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>flstmthead_typedescrip2</column>
   </data>
  </field>
  <field>
   <rect>
    <x>660</x>
    <y>15</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>f_diffprcnt</column>
   </data>
  </field>
  <field>
   <rect>
    <x>380</x>
    <y>0</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>flstmthead_qtr</column>
   </data>
  </field>
  <field>
   <rect>
    <x>380</x>
    <y>15</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>flstmthead_typedescrip2</column>
   </data>
  </field>
  <field>
   <rect>
    <x>660</x>
    <y>0</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>flstmthead_prqtr</column>
   </data>
  </field>
  <field>
   <rect>
    <x>580</x>
    <y>15</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>f_diff</column>
   </data>
  </field>
  <field>
   <rect>
    <x>500</x>
    <y>0</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>flstmthead_prqtr</column>
   </data>
  </field>
  <line>
   <xstart>5</xstart>
   <ystart>30</ystart>
   <xend>994</xend>
   <yend>30</yend>
   <weight>2</weight>
  </line>
  <label>
   <rect>
    <x>10</x>
    <y>0</y>
    <width>55</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Name</string>
  </label>
 </pghead>
 <section>
  <name>detail</name>
  <group>
   <name>subgrp</name>
   <column>flstmtitem_subgrp</column>
   <foot>
    <height>4</height>
    <line>
     <xstart>380</xstart>
     <ystart>1</ystart>
     <xend>740</xend>
     <yend>1</yend>
     <weight>0</weight>
    </line>
   </foot>
  </group>
  <detail>
   <key>
    <query>detail</query>
   </key>
   <height>19</height>
   <field>
    <rect>
     <x>380</x>
     <y>0</y>
     <width>75</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>flstmtitem_qtr</column>
    </data>
   </field>
   <field>
    <rect>
     <x>660</x>
     <y>0</y>
     <width>75</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>flstmtitem_prqtrdiffprcnt</column>
    </data>
   </field>
   <field>
    <rect>
     <x>500</x>
     <y>0</y>
     <width>75</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>flstmtitem_prqtr</column>
    </data>
   </field>
   <field>
    <rect>
     <x>25</x>
     <y>0</y>
     <width>345</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>flstmtitem_name</column>
    </data>
   </field>
   <field>
    <rect>
     <x>580</x>
     <y>0</y>
     <width>75</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>flstmtitem_prqtrdiff</column>
    </data>
   </field>
  </detail>
 </section>
 <pgfoot>
  <height>22</height>
  <field>
   <rect>
    <x>695</x>
    <y>0</y>
    <width>40</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Context Query</query>
    <column>page_number</column>
   </data>
  </field>
  <label>
   <rect>
    <x>5</x>
    <y>0</y>
    <width>85</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Report Date:</string>
  </label>
  <field>
   <rect>
    <x>95</x>
    <y>0</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Context Query</query>
    <column>report_date</column>
   </data>
  </field>
  <label>
   <rect>
    <x>550</x>
    <y>0</y>
    <width>85</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Page:</string>
  </label>
 </pgfoot>
 <rptfoot>
  <height>7</height>
  <line>
   <xstart>380</xstart>
   <ystart>0</ystart>
   <xend>740</xend>
   <yend>0</yend>
   <weight>0</weight>
  </line>
 </rptfoot>
</report>
