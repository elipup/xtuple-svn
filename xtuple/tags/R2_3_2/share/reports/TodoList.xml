<!DOCTYPE openRPTDef>
<report>
 <title>To-Do List</title>
 <name>TodoList</name>
 <description></description>
 <size>Letter</size>
 <portrait/>
 <topmargin>50</topmargin>
 <bottommargin>50</bottommargin>
 <rightmargin>50</rightmargin>
 <leftmargin>50</leftmargin>
 <querysource>
  <name>detail</name>
  <sql>SELECT todoitem_id AS id, todoitem_usr_id AS altId, 
       'T' AS type, todoitem_seq AS seq, 
       todoitem_name AS name, 
       firstLine(todoitem_description) AS descrip, 
       todoitem_status AS status, todoitem_due_date AS due, 
       usr_username AS usr, incdt_number AS incdt 
FROM usr, todoitem LEFT OUTER JOIN 
     incdt ON (incdt_id=todoitem_incdt_id) 
WHERE ( (todoitem_usr_id=usr_id)
  AND   (todoitem_due_date BETWEEN &lt;? value("startDate") ?>
                               AND &lt;? value("endDate") ?>)
  &lt;? if not exists("completed") ?>
  AND   (todoitem_status != 'C')
  &lt;? endif ?>
  &lt;? if exists("usr_id") ?>   
  AND (todoitem_usr_id=&lt;? value("usr_id") ?>)   
  &lt;? elseif exists("usr_pattern") ?>
  AND (todoitem_usr_id IN (SELECT usr_id 
        FROM usr 
        WHERE (usr_username ~ &lt;? value("usr_pattern") ?>)))   
  &lt;? endif ?>
  &lt;? if exists("active") ?>AND (todoitem_active) &lt;? endif ?>
       ) 
&lt;? if exists("incidents")?>
UNION 
SELECT incdt_id AS id, usr_id AS altId, 
       'I' AS type, NULL AS seq, 
       incdt_summary AS name, 
       firstLine(incdt_descrip) AS descrip, 
       incdt_status AS status,  NULL AS due, 
       incdt_assigned_username AS usr, incdt_number AS incdt 
FROM incdt LEFT OUTER JOIN usr ON (usr_username=incdt_assigned_username)
WHERE ((incdt_timestamp BETWEEN &lt;? value("incdtStartDate") ?>
                            AND &lt;? value("incdtEndDate") ?>)
  &lt;? if not exists("completed") ?>   
   AND (incdt_status != 'L')
  &lt;? endif ?>
  &lt;? if exists("usr_id") ?>   
  AND (usr_id=&lt;? value("usr_id") ?>)   
  &lt;? elseif exists("usr_pattern" ?>
  AND (usr_id IN (SELECT usr_id 
        FROM usr 
        WHERE (usr_username ~ &lt;? value("usr_pattern") ?>)))   
  &lt;? endif ?>
       ) 
&lt;? endif ?>
ORDER BY seq, usr;</sql>
 </querysource>
 <querysource>
  <name>queryParams</name>
  <sql>SELECT
  &lt;? if exists("completed") ?> 'Yes' &lt;? else ?> 'No' &lt;? endif ?> AS showClosed,
  &lt;? if exists("active") ?>    'Yes' &lt;? else ?> 'No' &lt;? endif ?> AS activeOnly,
  &lt;? if exists("incidents") ?> 'Yes' &lt;? else ?> 'No' &lt;? endif ?> AS showIncdts,
  &lt;? if exists("usr_id") ?>
    usr_username FROM usr WHERE usr_id = &lt;? value("usr_id") ?>
  &lt;? elseif exists("usr_pattern") ?>
    &lt;? value("usr_pattern") ?> AS usr_username
  &lt;? else ?>
    'All' AS usr_username
  &lt;? endif ?>
;</sql>
 </querysource>
 <rpthead>
  <height>141</height>
  <label>
   <rect>
    <x>100</x>
    <y>120</y>
    <width>20</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Type</string>
  </label>
  <label>
   <rect>
    <x>450</x>
    <y>55</y>
    <width>25</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>to</string>
  </label>
  <field>
   <rect>
    <x>380</x>
    <y>85</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Parameter Query</query>
    <column>incdtStartDate</column>
   </data>
  </field>
  <field>
   <rect>
    <x>120</x>
    <y>55</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>queryParams</query>
    <column>usr_username</column>
   </data>
  </field>
  <field>
   <rect>
    <x>120</x>
    <y>70</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>queryParams</query>
    <column>activeOnly</column>
   </data>
  </field>
  <label>
   <rect>
    <x>125</x>
    <y>120</y>
    <width>50</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Sequence</string>
  </label>
  <label>
   <rect>
    <x>10</x>
    <y>120</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>User</string>
  </label>
  <label>
   <rect>
    <x>20</x>
    <y>70</y>
    <width>80</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Active Only:</string>
  </label>
  <label>
   <rect>
    <x>400</x>
    <y>120</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Status</string>
  </label>
  <field>
   <rect>
    <x>475</x>
    <y>55</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Parameter Query</query>
    <column>endDate</column>
   </data>
  </field>
  <field>
   <rect>
    <x>475</x>
    <y>85</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Parameter Query</query>
    <column>incdtEndDate</column>
   </data>
  </field>
  <label>
   <rect>
    <x>600</x>
    <y>120</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Incident</string>
  </label>
  <label>
   <rect>
    <x>20</x>
    <y>100</y>
    <width>80</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Show Incidents:</string>
  </label>
  <label>
   <rect>
    <x>450</x>
    <y>85</y>
    <width>25</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>to</string>
  </label>
  <line>
   <xstart>10</xstart>
   <ystart>135</ystart>
   <xend>750</xend>
   <yend>135</yend>
   <weight>2</weight>
  </line>
  <label>
   <rect>
    <x>20</x>
    <y>55</y>
    <width>80</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>User:</string>
  </label>
  <label>
   <rect>
    <x>295</x>
    <y>10</y>
    <width>450</width>
    <height>37</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>18</size>
    <weight>bold</weight>
   </font>
   <right/>
   <vcenter/>
   <string>To-Do List</string>
  </label>
  <field>
   <rect>
    <x>120</x>
    <y>100</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>queryParams</query>
    <column>showIncdts</column>
   </data>
  </field>
  <label>
   <rect>
    <x>250</x>
    <y>55</y>
    <width>125</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>To-Do List Item Due Date:</string>
  </label>
  <label>
   <rect>
    <x>250</x>
    <y>85</y>
    <width>125</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Incident Create Date:</string>
  </label>
  <field>
   <rect>
    <x>120</x>
    <y>85</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>queryParams</query>
    <column>showClosed</column>
   </data>
  </field>
  <label>
   <rect>
    <x>500</x>
    <y>120</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Due Date</string>
  </label>
  <label>
   <rect>
    <x>20</x>
    <y>85</y>
    <width>80</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Completed:</string>
  </label>
  <field>
   <rect>
    <x>380</x>
    <y>55</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Parameter Query</query>
    <column>startDate</column>
   </data>
  </field>
  <label>
   <rect>
    <x>175</x>
    <y>120</y>
    <width>200</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Name</string>
  </label>
 </rpthead>
 <pghead>
  <firstpage/>
  <height>6</height>
 </pghead>
 <pghead>
  <height>21</height>
  <label>
   <rect>
    <x>175</x>
    <y>0</y>
    <width>200</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Name</string>
  </label>
  <label>
   <rect>
    <x>100</x>
    <y>0</y>
    <width>20</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Type</string>
  </label>
  <label>
   <rect>
    <x>500</x>
    <y>0</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Due Date</string>
  </label>
  <label>
   <rect>
    <x>600</x>
    <y>0</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Incident</string>
  </label>
  <line>
   <xstart>5</xstart>
   <ystart>15</ystart>
   <xend>745</xend>
   <yend>15</yend>
   <weight>2</weight>
  </line>
  <label>
   <rect>
    <x>125</x>
    <y>0</y>
    <width>50</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Sequence</string>
  </label>
  <label>
   <rect>
    <x>400</x>
    <y>0</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Status</string>
  </label>
  <label>
   <rect>
    <x>10</x>
    <y>0</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>User</string>
  </label>
 </pghead>
 <section>
  <name>detail</name>
  <group>
   <name>ByUser</name>
   <column>usr</column>
  </group>
  <detail>
   <key>
    <query>detail</query>
   </key>
   <height>31</height>
   <field>
    <rect>
     <x>125</x>
     <y>0</y>
     <width>50</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <top/>
    <data>
     <query>detail</query>
     <column>seq</column>
    </data>
   </field>
   <text>
    <rect>
     <x>175</x>
     <y>15</y>
     <width>600</width>
     <height>15</height>
    </rect>
    <bottompad>0</bottompad>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <top/>
    <data>
     <query>detail</query>
     <column>descrip</column>
    </data>
   </text>
   <field>
    <rect>
     <x>100</x>
     <y>0</y>
     <width>20</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <top/>
    <data>
     <query>detail</query>
     <column>type</column>
    </data>
   </field>
   <field>
    <rect>
     <x>600</x>
     <y>0</y>
     <width>100</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <top/>
    <data>
     <query>detail</query>
     <column>incdt</column>
    </data>
   </field>
   <field>
    <rect>
     <x>500</x>
     <y>0</y>
     <width>100</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>due</column>
    </data>
   </field>
   <field>
    <rect>
     <x>400</x>
     <y>0</y>
     <width>100</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>status</column>
    </data>
   </field>
   <field>
    <rect>
     <x>10</x>
     <y>0</y>
     <width>75</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <top/>
    <data>
     <query>detail</query>
     <column>usr</column>
    </data>
   </field>
   <field>
    <rect>
     <x>175</x>
     <y>0</y>
     <width>200</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <top/>
    <data>
     <query>detail</query>
     <column>name</column>
    </data>
   </field>
  </detail>
 </section>
 <pgfoot>
  <height>16</height>
  <label>
   <rect>
    <x>615</x>
    <y>0</y>
    <width>85</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Page:</string>
  </label>
  <field>
   <rect>
    <x>705</x>
    <y>0</y>
    <width>40</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Context Query</query>
    <column>page_number</column>
   </data>
  </field>
  <field>
   <rect>
    <x>90</x>
    <y>0</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Context Query</query>
    <column>report_date</column>
   </data>
  </field>
  <label>
   <rect>
    <x>0</x>
    <y>0</y>
    <width>85</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Report Date:</string>
  </label>
 </pgfoot>
</report>
