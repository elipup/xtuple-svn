<!DOCTYPE openRPTDef>
<report>
 <title>Purchase Order</title>
 <name>PurchaseOrder</name>
 <description>This is an example Purchase Order report that can be used an example for creating customized Purchase Order reports for customers.</description>
 <watermark>
  <data>
   <query>Head</query>
   <column>title</column>
  </data>
  <opacity>25</opacity>
 </watermark>
 <size>letter</size>
 <portrait/>
 <topmargin>28</topmargin>
 <bottommargin>28</bottommargin>
 <rightmargin>0</rightmargin>
 <leftmargin>0</leftmargin>
 <querysource>
  <name>Head</name>
  <sql>SELECT pohead_number,
       formatDate(pohead_orderdate) AS f_orderdate,
       pohead_fob,
       pohead_shipvia,
       vend_number,
       vend_name,
       formatAddr(vend_address1, vend_address2, vend_address3, (vend_city || '  '  || vend_state || '  ' || vend_zip), vend_country) AS f_address,
       warehous_descrip,
       formatAddr(warehous_addr1, warehous_addr2, warehous_addr3, (warehous_city || '  '  || warehous_state || '  ' || warehous_zip), warehous_country) AS f_shiptoaddress,
       CASE WHEN(pohead_terms_id IS NULL OR pohead_terms_id = -1) THEN text('N/A')
            ELSE (SELECT terms_code FROM terms WHERE (terms_id=pohead_terms_id) )
       END AS f_terms,
       pohead_agent_username AS username,
       pohead_comments,
       text(&lt;? value("title") ?>) AS title
  FROM pohead, vend, warehous
 WHERE ((pohead_vend_id=vend_id)
   AND (pohead_warehous_id=warehous_id)
   AND (pohead_id=&lt;? value("pohead_id") ?>) );</sql>
 </querysource>
 <querysource>
  <name>Detail</name>
  <sql>SELECT poitem_linenumber,
       poitem_comments,
       poitem_linenumber AS f_line,
       item_number,
       poitem_vend_item_number,
       CASE WHEN (poitem_vend_item_descrip LIKE '') THEN (item_descrip1 || ' ' || item_descrip2)
            ELSE (poitem_vend_item_descrip)
       END AS itemdescription,
       formatQty(poitem_qty_ordered) AS f_ordered,
       CASE WHEN (poitem_vend_uom LIKE '') THEN (uom_name)
            ELSE (poitem_vend_uom)
       END AS itemuom,
       formatPrice(poitem_unitprice) AS f_price,
       formatExtPrice(poitem_unitprice * poitem_qty_ordered) AS f_extended,
       formatDate(poitem_duedate) AS f_duedate
  FROM poitem LEFT OUTER JOIN
         ( itemsite JOIN item
           ON (itemsite_item_id=item_id) JOIN uom ON (item_inv_uom_id=uom_id))
         ON (poitem_itemsite_id=itemsite_id)
 WHERE (poitem_pohead_id=&lt;? value("pohead_id") ?>)
ORDER BY poitem_linenumber;</sql>
 </querysource>
 <querysource>
  <name>Foot</name>
  <sql>SELECT formatExtPrice(COALESCE(SUM(poitem_qty_ordered * poitem_unitprice), 0)) AS f_totaldue
  FROM poitem
 WHERE (poitem_pohead_id=&lt;? value("pohead_id") ?>);</sql>
 </querysource>
 <querysource>
  <name>Logo</name>
  <sql>SELECT image_data
  FROM image
 WHERE (image_name='NSILogo');</sql>
 </querysource>
 <querysource>
  <name>FootExt</name>
  <sql>SELECT formatExtPrice(pohead_freight + pohead_tax +
         ( SELECT COALESCE(SUM(poitem_qty_ordered * poitem_unitprice), 0)
             FROM poitem
            WHERE (poitem_pohead_id=&lt;? value("pohead_id") ?>)
         )) AS f_total,
       formatExtPrice(pohead_tax) AS f_tax,
       formatExtPrice(pohead_freight) AS f_freight
  FROM pohead
 WHERE (pohead_id=&lt;? value("pohead_id") ?>)</sql>
 </querysource>
 <pghead>
  <height>363</height>
  <label>
   <rect>
    <x>455</x>
    <y>135</y>
    <width>38</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>SHIP</string>
  </label>
  <label>
   <rect>
    <x>550</x>
    <y>335</y>
    <width>85</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>UNIT PRICE</string>
  </label>
  <field>
   <rect>
    <x>650</x>
    <y>65</y>
    <width>126</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>12</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>pohead_number</column>
   </data>
  </field>
  <field>
   <rect>
    <x>180</x>
    <y>285</y>
    <width>385</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>11</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>pohead_shipvia</column>
   </data>
  </field>
  <label>
   <rect>
    <x>25</x>
    <y>315</y>
    <width>38</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>LINE</string>
  </label>
  <field>
   <rect>
    <x>500</x>
    <y>130</y>
    <width>300</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>12</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>warehous_descrip</column>
   </data>
  </field>
  <label>
   <rect>
    <x>665</x>
    <y>45</y>
    <width>95</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>P/O NUMBER</string>
  </label>
  <line>
   <xstart>30</xstart>
   <ystart>355</ystart>
   <xend>805</xend>
   <yend>355</yend>
   <weight>0</weight>
  </line>
  <field>
   <rect>
    <x>680</x>
    <y>285</y>
    <width>120</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>11</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>username</column>
   </data>
  </field>
  <label>
   <rect>
    <x>40</x>
    <y>35</y>
    <width>405</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>12</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Building 1, Suite 2</string>
  </label>
  <field>
   <rect>
    <x>30</x>
    <y>285</y>
    <width>190</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>11</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>pohead_fob</column>
   </data>
  </field>
  <label>
   <rect>
    <x>95</x>
    <y>260</y>
    <width>60</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>F.O.B.</string>
  </label>
  <label>
   <rect>
    <x>705</x>
    <y>320</y>
    <width>100</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>EXTENDED PRICE</string>
  </label>
  <label>
   <rect>
    <x>260</x>
    <y>320</y>
    <width>135</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>ITEM DESCRIPTION</string>
  </label>
  <label>
   <rect>
    <x>705</x>
    <y>335</y>
    <width>100</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>REQ. DATE</string>
  </label>
  <field>
   <rect>
    <x>785</x>
    <y>65</y>
    <width>35</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>12</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <top/>
   <data>
    <query>Context Query</query>
    <column>page_number</column>
   </data>
  </field>
  <field>
   <rect>
    <x>550</x>
    <y>65</y>
    <width>95</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>12</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>Context Query</query>
    <column>report_date</column>
   </data>
  </field>
  <label>
   <rect>
    <x>465</x>
    <y>150</y>
    <width>20</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>TO:</string>
  </label>
  <label>
   <rect>
    <x>575</x>
    <y>45</y>
    <width>45</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>DATE</string>
  </label>
  <label>
   <rect>
    <x>570</x>
    <y>5</y>
    <width>254</width>
    <height>33</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>14</size>
    <weight>bold</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Purchase Order</string>
  </label>
  <label>
   <rect>
    <x>785</x>
    <y>45</y>
    <width>35</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <top/>
   <string>PAGE</string>
  </label>
  <line>
   <xstart>30</xstart>
   <ystart>280</ystart>
   <xend>805</xend>
   <yend>280</yend>
   <weight>0</weight>
  </line>
  <text>
   <rect>
    <x>500</x>
    <y>150</y>
    <width>300</width>
    <height>19</height>
   </rect>
   <bottompad>0</bottompad>
   <font>
    <face>Arial</face>
    <size>12</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>f_shiptoaddress</column>
   </data>
  </text>
  <label>
   <rect>
    <x>705</x>
    <y>260</y>
    <width>70</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>ORDERED BY</string>
  </label>
  <label>
   <rect>
    <x>550</x>
    <y>320</y>
    <width>85</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>QTY. ORDERED</string>
  </label>
  <line>
   <xstart>30</xstart>
   <ystart>310</ystart>
   <xend>805</xend>
   <yend>310</yend>
   <weight>0</weight>
  </line>
  <field>
   <rect>
    <x>535</x>
    <y>285</y>
    <width>120</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>11</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>f_terms</column>
   </data>
  </field>
  <label>
   <rect>
    <x>45</x>
    <y>135</y>
    <width>20</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <top/>
   <string>TO:</string>
  </label>
  <label>
   <rect>
    <x>570</x>
    <y>260</y>
    <width>38</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>TERMS</string>
  </label>
  <label>
   <rect>
    <x>60</x>
    <y>330</y>
    <width>80</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>YOUR ITEM #</string>
  </label>
  <label>
   <rect>
    <x>40</x>
    <y>15</y>
    <width>300</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>12</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Your Company Name</string>
  </label>
  <label>
   <rect>
    <x>40</x>
    <y>95</y>
    <width>300</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>12</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>(800) 555-1234</string>
  </label>
  <field>
   <rect>
    <x>75</x>
    <y>130</y>
    <width>270</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>12</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>vend_name</column>
   </data>
  </field>
  <text>
   <rect>
    <x>75</x>
    <y>150</y>
    <width>300</width>
    <height>19</height>
   </rect>
   <bottompad>0</bottompad>
   <font>
    <face>Arial</face>
    <size>12</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>f_address</column>
   </data>
  </text>
  <label>
   <rect>
    <x>40</x>
    <y>55</y>
    <width>300</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>12</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>123 Nowhere Lane</string>
  </label>
  <label>
   <rect>
    <x>65</x>
    <y>315</y>
    <width>80</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>OUR ITEM #</string>
  </label>
  <label>
   <rect>
    <x>40</x>
    <y>75</y>
    <width>300</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>12</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Someplace, State 12345-6789</string>
  </label>
  <label>
   <rect>
    <x>320</x>
    <y>260</y>
    <width>75</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>SHIP VIA:</string>
  </label>
  <label>
   <rect>
    <x>635</x>
    <y>320</y>
    <width>80</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>PRICE UNIT</string>
  </label>
 </pghead>
 <section>
  <name>detail</name>
  <detail>
   <key>
    <query>Detail</query>
   </key>
   <height>73</height>
   <field>
    <rect>
     <x>70</x>
     <y>5</y>
     <width>95</width>
     <height>20</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>Detail</query>
     <column>item_number</column>
    </data>
   </field>
   <field>
    <rect>
     <x>555</x>
     <y>5</y>
     <width>75</width>
     <height>20</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>Detail</query>
     <column>f_ordered</column>
    </data>
   </field>
   <field>
    <rect>
     <x>690</x>
     <y>25</y>
     <width>100</width>
     <height>20</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>Detail</query>
     <column>f_duedate</column>
    </data>
   </field>
   <field>
    <rect>
     <x>50</x>
     <y>25</y>
     <width>225</width>
     <height>20</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>9</size>
     <weight>normal</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>Detail</query>
     <column>poitem_vend_item_number</column>
    </data>
   </field>
   <field>
    <rect>
     <x>35</x>
     <y>5</y>
     <width>36</width>
     <height>20</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>Detail</query>
     <column>f_line</column>
    </data>
   </field>
   <field>
    <rect>
     <x>555</x>
     <y>25</y>
     <width>75</width>
     <height>17</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>Detail</query>
     <column>f_price</column>
    </data>
   </field>
   <field>
    <rect>
     <x>635</x>
     <y>5</y>
     <width>70</width>
     <height>20</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <hcenter/>
    <vcenter/>
    <data>
     <query>Detail</query>
     <column>itemuom</column>
    </data>
   </field>
   <text>
    <rect>
     <x>165</x>
     <y>5</y>
     <width>390</width>
     <height>20</height>
    </rect>
    <bottompad>0</bottompad>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>Detail</query>
     <column>itemdescription</column>
    </data>
   </text>
   <text>
    <rect>
     <x>100</x>
     <y>50</y>
     <width>605</width>
     <height>20</height>
    </rect>
    <bottompad>0</bottompad>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>Detail</query>
     <column>poitem_comments</column>
    </data>
   </text>
   <field>
    <rect>
     <x>695</x>
     <y>5</y>
     <width>95</width>
     <height>17</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>10</size>
     <weight>normal</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>Detail</query>
     <column>f_extended</column>
    </data>
   </field>
  </detail>
 </section>
 <pgfoot>
  <lastpage/>
  <height>73</height>
  <field>
   <rect>
    <x>675</x>
    <y>35</y>
    <width>100</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <data>
    <query>FootExt</query>
    <column>f_freight</column>
   </data>
  </field>
  <field>
   <rect>
    <x>675</x>
    <y>20</y>
    <width>100</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <data>
    <query>FootExt</query>
    <column>f_tax</column>
   </data>
  </field>
  <label>
   <rect>
    <x>610</x>
    <y>50</y>
    <width>60</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Total:</string>
  </label>
  <field>
   <rect>
    <x>675</x>
    <y>5</y>
    <width>100</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <data>
    <query>Foot</query>
    <column>f_totaldue</column>
   </data>
  </field>
  <text>
   <rect>
    <x>40</x>
    <y>5</y>
    <width>530</width>
    <height>20</height>
   </rect>
   <bottompad>14</bottompad>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Head</query>
    <column>pohead_comments</column>
   </data>
  </text>
  <field>
   <rect>
    <x>675</x>
    <y>50</y>
    <width>100</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <data>
    <query>FootExt</query>
    <column>f_total</column>
   </data>
  </field>
  <label>
   <rect>
    <x>610</x>
    <y>35</y>
    <width>60</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Freight:</string>
  </label>
  <label>
   <rect>
    <x>610</x>
    <y>20</y>
    <width>60</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Tax:</string>
  </label>
  <label>
   <rect>
    <x>610</x>
    <y>5</y>
    <width>60</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Sub Total:</string>
  </label>
 </pgfoot>
 <pgfoot>
  <height>81</height>
  <label>
   <rect>
    <x>33</x>
    <y>38</y>
    <width>38</width>
    <height>17</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>12</size>
    <weight>normal</weight>
   </font>
   <left/>
   <top/>
   <string></string>
  </label>
 </pgfoot>
</report>
