<!DOCTYPE openRPTDef>
<report>
 <title>Customers By Characteristic</title>
 <name>CustomersByCharacteristic</name>
 <description></description>
 <size>Letter</size>
 <portrait/>
 <topmargin>50</topmargin>
 <bottommargin>50</bottommargin>
 <rightmargin>50</rightmargin>
 <leftmargin>50</leftmargin>
 <querysource>
  <name>head</name>
  <sql>SELECT char_name,
       &lt;? if not exists("hasCharacteristic") ?>
       '[ Does not have Characteristic ]'
       &lt;? elseif exists("emptyValue") ?> '[ Empty ]'
       &lt;? else ?> &lt;? value("value") ?> &lt;? endif ?> AS value
  FROM char
 WHERE (char_id=&lt;? value("char_id") ?>);</sql>
 </querysource>
 <querysource>
  <name>detail</name>
  <sql>SELECT cust_id, cust_number, cust_name, char_name, 
&lt;? if exists("hasCharacteristic") ?>
       charass_value 
FROM cust, charass, char 
WHERE ( (charass_target_type='C')
 AND (charass_target_id=cust_id)
 AND (charass_char_id=char_id)
 AND (char_id=&lt;? value("char_id") ?>)
 &lt;? if exists("emptyValue") ?>
 AND (charass_value IS NULL OR LENGTH(TRIM(charass_value)) = 0)
 &lt;? else ?>
 AND (charass_value ~ &lt;? value("value") ?>)
 &lt;? endif ?>
) 
&lt;? else ?>
       '' AS charass_value 
FROM cust, char 
WHERE ((cust_id NOT IN (SELECT charass_target_id
                        FROM charass
                        WHERE ((charass_target_type='C')
                          AND  (charass_char_id=char_id))
       ))
 AND (char_id=&lt;? value("char_id") ?>)
) 
&lt;? endif ?>
&lt;? if not exists("showInactive") ?>
 AND (cust_active)
&lt;? endif ?>
ORDER BY cust_number;</sql>
 </querysource>
 <rpthead>
  <height>145</height>
  <label>
   <rect>
    <x>10</x>
    <y>65</y>
    <width>120</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Characteristic:</string>
  </label>
  <label>
   <rect>
    <x>360</x>
    <y>125</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Characteristic</string>
  </label>
  <field>
   <rect>
    <x>135</x>
    <y>65</y>
    <width>300</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>char_name</column>
   </data>
  </field>
  <label>
   <rect>
    <x>50</x>
    <y>125</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Number</string>
  </label>
  <label>
   <rect>
    <x>545</x>
    <y>125</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Value</string>
  </label>
  <label>
   <rect>
    <x>10</x>
    <y>85</y>
    <width>120</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Value:</string>
  </label>
  <label>
   <rect>
    <x>155</x>
    <y>125</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Name</string>
  </label>
  <label>
   <rect>
    <x>270</x>
    <y>10</y>
    <width>475</width>
    <height>40</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>18</size>
    <weight>bold</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Customers By Characteristic</string>
  </label>
  <field>
   <rect>
    <x>135</x>
    <y>85</y>
    <width>300</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>value</column>
   </data>
  </field>
  <line>
   <xstart>5</xstart>
   <ystart>140</ystart>
   <xend>745</xend>
   <yend>140</yend>
   <weight>2</weight>
  </line>
 </rpthead>
 <pghead>
  <firstpage/>
  <height>5</height>
 </pghead>
 <pghead>
  <height>22</height>
  <label>
   <rect>
    <x>155</x>
    <y>0</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Name</string>
  </label>
  <label>
   <rect>
    <x>50</x>
    <y>0</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Number</string>
  </label>
  <label>
   <rect>
    <x>545</x>
    <y>0</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Value</string>
  </label>
  <label>
   <rect>
    <x>360</x>
    <y>0</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Characteristic</string>
  </label>
  <line>
   <xstart>5</xstart>
   <ystart>15</ystart>
   <xend>745</xend>
   <yend>15</yend>
   <weight>2</weight>
  </line>
 </pghead>
 <section>
  <name>detail</name>
  <detail>
   <key>
    <query>detail</query>
   </key>
   <height>15</height>
   <field>
    <rect>
     <x>155</x>
     <y>0</y>
     <width>200</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>cust_name</column>
    </data>
   </field>
   <field>
    <rect>
     <x>545</x>
     <y>0</y>
     <width>200</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>charass_value</column>
    </data>
   </field>
   <field>
    <rect>
     <x>50</x>
     <y>0</y>
     <width>100</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>cust_number</column>
    </data>
   </field>
   <field>
    <rect>
     <x>360</x>
     <y>0</y>
     <width>180</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>char_name</column>
    </data>
   </field>
  </detail>
 </section>
 <pgfoot>
  <height>15</height>
  <field>
   <rect>
    <x>705</x>
    <y>0</y>
    <width>40</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Context Query</query>
    <column>page_number</column>
   </data>
  </field>
  <label>
   <rect>
    <x>0</x>
    <y>0</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Report Date:</string>
  </label>
  <field>
   <rect>
    <x>105</x>
    <y>0</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Context Query</query>
    <column>report_date</column>
   </data>
  </field>
  <label>
   <rect>
    <x>600</x>
    <y>0</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Page:</string>
  </label>
 </pgfoot>
</report>
