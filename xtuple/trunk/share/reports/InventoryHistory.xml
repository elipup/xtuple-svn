<!DOCTYPE openRPTDef>
<report>
 <title>Inventory History</title>
 <name>InventoryHistory</name>
 <description></description>
 <size>Letter</size>
 <portrait/>
 <topmargin>50</topmargin>
 <bottommargin>50</bottommargin>
 <rightmargin>50</rightmargin>
 <leftmargin>50</leftmargin>
 <querysource>
  <name>head</name>
  <sql>SELECT formatDate(&lt;? value("startDate") ?>) AS startdate,
       formatDate(&lt;? value("endDate") ?>) AS enddate,
       &lt;? if exists("warehous_id") ?>
         ( SELECT warehous_code
             FROM warehous
            WHERE (warehous_id=&lt;? value("warehous_id") ?>) )
       &lt;? else ?>
         text('All Sites')
       &lt;? endif ?>
       AS warehouse,
       &lt;? if exists("itemgrp_id") ?>
         ( SELECT (itemgrp_name||'-'||itemgrp_descrip)
             FROM itemgrp
            WHERE (itemgrp_id=&lt;? value("itemgrp_id") ?>) )
       &lt;? elseif exists("itemgrp_pattern") ?>
         text(&lt;? value("itemgrp_pattern") ?>)
       &lt;? elseif exists("classcode_id") ?>
         ( SELECT (classcode_code||'-'||classcode_descrip)
             FROM classcode
            WHERE (classcode_id=&lt;? value("classcode_id") ?>) )
       &lt;? elseif exists("classcode_pattern") ?>
         text(&lt;? value("classcode_pattern") ?>)
       &lt;? elseif exists("plancode_id") ?>
         ( SELECT (plancode_code||'-'||plancode_name)
             FROM plancode
            WHERE (plancode_id=&lt;? value("plancode_id") ?>) )
       &lt;? elseif exists("plancode_pattern") ?>
         text(&lt;? value("plancode_pattern") ?>)
       &lt;? elseif exists("item_id") ?>
         ( SELECT (item_number)
             FROM item
            WHERE (item_id=&lt;? value("item_id") ?>) )
       &lt;? elseif exists("orderNumber") ?>
         text(&lt;? value("orderNumber") ?>)
       &lt;? else ?>
         text('All')
       &lt;? endif ?>
       AS lbl_value,
       &lt;? if reExists("itemgrp.*") ?>
         text('Item Group:')
       &lt;? elseif reExists("classcode.*") ?>
         text('Class Code:')
       &lt;? elseif reExists("plancode.*") ?>
         text('Planner Code:')
       &lt;? elseif exists("item_id") ?>
         text('Item Number:')
       &lt;? elseif exists("orderNumber") ?>
         text('Order Number:')
       &lt;? else ?>
         text('Unknown Class:')
       &lt;? endif ?>
       AS lbl_bytype,
       &lt;? if reExists("itemgrp.*") ?>
         text('Inventory History by Item Group')
       &lt;? elseif reExists("classcode.*") ?>
         text('Inventory History by Class Code')
       &lt;? elseif reExists("plancode.*") ?>
         text('Inventory History by Planner Code')
       &lt;? elseif exists("item_id") ?>
         text('Inventory History by Item')
       &lt;? elseif exists("orderNumber") ?>
         text('Inventory History by Order')
       &lt;? else ?>
         text('Inventory History')
       &lt;? endif ?>
       AS lbl_title;</sql>
 </querysource>
 <querysource>
  <name>detail</name>
  <sql>SELECT invhist_id,
       invhist_transdate,
       formatDateTime(invhist_transdate) AS f_transdate,
       invhist_transtype,
       whs1.warehous_code AS warehous_code,
       item_number,
       item_descrip1,
       item_descrip2,
       formatQty(invhist_invqty) AS transqty,
       (invhist_value_after-invhist_value_before) AS transvalue,
       formatMoney(invhist_value_after-invhist_value_before) AS f_transvalue,
       invhist_invuom,
       CASE WHEN (invhist_ordtype NOT LIKE '') THEN (invhist_ordtype || '-' || invhist_ordnumber)
            ELSE invhist_ordnumber
       END AS ordernumber,
       formatQty(invhist_qoh_before) AS qohbefore,
       formatQty(invhist_qoh_after) AS qohafter,
       CASE WHEN (invhist_costmethod='A') THEN &lt;? value("average") ?>
            WHEN (invhist_costmethod='S') THEN &lt;? value("standard") ?>
            WHEN (invhist_costmethod='J') THEN &lt;? value("job") ?>
            WHEN (invhist_costmethod='N') THEN &lt;? value("none") ?>
            ELSE &lt;? value("unknown") ?>
       END AS costmethod,
       formatMoney(invhist_value_before) AS valbefore,
       formatMoney(invhist_value_after) AS valafter,
       invhist_user AS username,
       invhist_posted,
       0 AS invdetail_id,
       '' AS locationname,
       '' AS detailqty,
       '' AS locationqtybefore,
       '' AS locationqtyafter,
       CASE WHEN (invhist_transtype='TW') THEN whs1.warehous_code
            WHEN (invhist_transtype='IB') THEN whs1.warehous_code
            WHEN (invhist_transtype='IM') THEN whs1.warehous_code
            WHEN (invhist_transtype='IT') THEN whs1.warehous_code
            WHEN (invhist_transtype='RB') THEN 'WIP'
            WHEN (invhist_transtype='RM') THEN 'WIP'
            WHEN (invhist_transtype='RP') THEN 'PURCH'
            WHEN (invhist_transtype='RR') THEN 'CUST'
            WHEN (invhist_transtype='RS') THEN 'SHIP'
            WHEN (invhist_transtype='SH') THEN whs1.warehous_code
            WHEN (invhist_transtype='SI') THEN whs1.warehous_code
            WHEN (invhist_transtype='SV') THEN whs1.warehous_code
	    WHEN (invhist_transtype='TR') THEN whs2.warehous_code
	    WHEN (invhist_transtype='TS') THEN whs1.warehous_code
            ELSE ''
       END AS locfrom,
       CASE WHEN (invhist_transtype='TW') THEN whs2.warehous_code
            WHEN (invhist_transtype='AD') THEN whs1.warehous_code
            WHEN (invhist_transtype='CC') THEN whs1.warehous_code
            WHEN (invhist_transtype='IB') THEN 'WIP'
            WHEN (invhist_transtype='IM') THEN 'WIP'
            WHEN (invhist_transtype='NN') THEN whs1.warehous_code
            WHEN (invhist_transtype='RB') THEN whs1.warehous_code
            WHEN (invhist_transtype='RM') THEN whs1.warehous_code
            WHEN (invhist_transtype='RP') THEN whs1.warehous_code
            WHEN (invhist_transtype='RR') THEN whs1.warehous_code
            WHEN (invhist_transtype='RS') THEN whs1.warehous_code
            WHEN (invhist_transtype='RT') THEN whs1.warehous_code
            WHEN (invhist_transtype='RX') THEN whs1.warehous_code
            WHEN (invhist_transtype='SH') THEN 'SHIP'
            WHEN (invhist_transtype='SI') THEN 'SCRAP'
            WHEN (invhist_transtype='SV') THEN 'SHIP'
	    WHEN (invhist_transtype='TR') THEN whs1.warehous_code
	    WHEN (invhist_transtype='TS') THEN whs2.warehous_code
            ELSE ''
       END AS locto
  FROM itemsite, item, warehous AS whs1, invhist LEFT OUTER JOIN warehous AS whs2 ON (invhist_xfer_warehous_id=whs2.warehous_id)
 WHERE ( (NOT invhist_hasdetail)
   AND (invhist_itemsite_id=itemsite_id)
   AND (itemsite_item_id=item_id)
   AND (itemsite_warehous_id=whs1.warehous_id)
  AND  (DATE(invhist_transdate) BETWEEN &lt;? value("startDate") ?> AND &lt;? value("endDate") ?> )
   AND (transType(invhist_transtype, &lt;? value("transType") ?>))
&lt;? if exists("orderType") ?>
  AND  (invhist_ordtype=&lt;? value("orderType") ?>)
&lt;? endif ?>
&lt;? if exists("orderNumber") ?>
  AND  (invhist_ordnumber ~ &lt;? value("orderNumber") ?>)
  AND  (invhist_ordtype = 'SO')
&lt;? endif ?>
&lt;? if exists("warehous_id") ?>
   AND (itemsite_warehous_id=&lt;? value("warehous_id") ?>)
&lt;? endif ?>
&lt;? if exists("item_id") ?>
  AND  (itemsite_item_id=&lt;? value("item_id") ?>)
&lt;? endif ?>
&lt;? if exists("itemgrp_id") ?>
   AND (item_id IN (SELECT itemgrpitem_item_id
                      FROM itemgrpitem
                     WHERE (itemgrpitem_itemgrp_id=&lt;? value("itemgrp_id") ?>)))
&lt;? elseif exists("itemgrp_pattern") ?>
   AND (item_id IN (SELECT itemgrpitem_item_id
                      FROM itemgrpitem, itemgrp
                     WHERE ( (itemgrpitem_itemgrp_id=itemgrp_id)
                       AND (itemgrp_name ~ &lt;? value("itemgrp_pattern") ?>) ) ))
&lt;? elseif exists("classcode_id") ?>
   AND (item_classcode_id=&lt;? value("classcode_id") ?>)
&lt;? elseif exists("classcode_pattern") ?>
   AND (item_classcode_id IN (SELECT classcode_id
                                FROM classcode
                               WHERE (classcode_code ~ &lt;? value("classcode_pattern") ?>)))
&lt;? elseif exists("plancode_id") ?>
   AND (itemsite_plancode_id=&lt;? value("plancode_id") ?>)
&lt;? elseif exists("plancode_pattern") ?>
   AND (itemsite_plancode_id IN (SELECT plancode_id FROM plancode WHERE (plancode_code ~ &lt;? value("plancode_pattern") ?>)))
&lt;? elseif exists("itemgrp") ?>
   AND (item_id IN (SELECT DISTINCT itemgrpitem_item_id FROM itemgrpitem))
&lt;? endif ?>
)
UNION
SELECT invhist_id,
       invhist_transdate,
       formatDateTime(invhist_transdate) AS transdate,
       invhist_transtype,
       whs1.warehous_code AS warehous_code,
       item_number,
       item_descrip1,
       item_descrip2,
       formatQty(invhist_invqty) AS transqty,
       0 AS transvalue,
       formatMoney(invhist_value_after-invhist_value_before) AS f_transvalue,
       invhist_invuom,
       CASE WHEN (invhist_ordtype NOT LIKE '') THEN (invhist_ordtype || '-' || invhist_ordnumber)
            ELSE invhist_ordnumber
       END AS ordernumber,
       formatQty(invhist_qoh_before) AS qohbefore,
       formatQty(invhist_qoh_after) AS qohafter,
       CASE WHEN(invhist_costmethod='A') THEN text('Average')
            WHEN(invhist_costmethod='S') THEN text('Standard')
            WHEN(invhist_costmethod='J') THEN text('Job')
            WHEN(invhist_costmethod='N') THEN text('None')
            ELSE 'UNKNOWN'
       END AS costmethod,
       formatMoney(invhist_value_before) AS valbefore,
       formatMoney(invhist_value_after) AS valafter,
       invhist_user AS username,
       invhist_posted,
       invdetail_id,
       CASE WHEN (invdetail_location_id=-1) THEN formatlotserialnumber(invdetail_ls_id)
            WHEN (invdetail_ls_id IS NULL) THEN formatLocationName(invdetail_location_id)
            ELSE (formatLocationName(invdetail_location_id) || '-' || formatlotserialnumber(invdetail_ls_id))
       END AS locationname,
       formatQty(invdetail_qty) AS detailqty,
       formatQty(invdetail_qty_before) AS locationqtybefore,
       formatQty(invdetail_qty_after) AS locationqtyafter,
       CASE WHEN (invhist_transtype='TW') THEN whs1.warehous_code
            WHEN (invhist_transtype='IB') THEN whs1.warehous_code
            WHEN (invhist_transtype='IM') THEN whs1.warehous_code
            WHEN (invhist_transtype='IT') THEN whs1.warehous_code
            WHEN (invhist_transtype='RB') THEN 'WIP'
            WHEN (invhist_transtype='RM') THEN 'WIP'
            WHEN (invhist_transtype='RP') THEN 'PURCH'
            WHEN (invhist_transtype='RR') THEN 'CUST'
            WHEN (invhist_transtype='RS') THEN 'SHIP'
            WHEN (invhist_transtype='SH') THEN whs1.warehous_code
            WHEN (invhist_transtype='SI') THEN whs1.warehous_code
            WHEN (invhist_transtype='SV') THEN whs1.warehous_code
	    WHEN (invhist_transtype='TR') THEN whs2.warehous_code
	    WHEN (invhist_transtype='TS') THEN whs1.warehous_code
            ELSE ''
       END AS locfrom,
       CASE WHEN (invhist_transtype='TW') THEN whs2.warehous_code
            WHEN (invhist_transtype='AD') THEN whs1.warehous_code
            WHEN (invhist_transtype='CC') THEN whs1.warehous_code
            WHEN (invhist_transtype='IB') THEN 'WIP'
            WHEN (invhist_transtype='IM') THEN 'WIP'
            WHEN (invhist_transtype='NN') THEN whs1.warehous_code
            WHEN (invhist_transtype='RB') THEN whs1.warehous_code
            WHEN (invhist_transtype='RM') THEN whs1.warehous_code
            WHEN (invhist_transtype='RP') THEN whs1.warehous_code
            WHEN (invhist_transtype='RR') THEN whs1.warehous_code
            WHEN (invhist_transtype='RS') THEN whs1.warehous_code
            WHEN (invhist_transtype='RT') THEN whs1.warehous_code
            WHEN (invhist_transtype='RX') THEN whs1.warehous_code
            WHEN (invhist_transtype='SH') THEN 'SHIP'
            WHEN (invhist_transtype='SI') THEN 'SCRAP'
            WHEN (invhist_transtype='SV') THEN 'SHIP'
	    WHEN (invhist_transtype='TR') THEN whs1.warehous_code
	    WHEN (invhist_transtype='TS') THEN whs2.warehous_code
            ELSE ''
       END AS locto
  FROM itemsite, item, warehous AS whs1, invdetail, invhist LEFT OUTER JOIN warehous AS whs2 ON (invhist_xfer_warehous_id=whs2.warehous_id)
 WHERE ((invhist_hasdetail)
   AND (invhist_itemsite_id=itemsite_id)
   AND (itemsite_item_id=item_id)
   AND (itemsite_warehous_id=whs1.warehous_id)
   AND (invdetail_invhist_id=invhist_id)
   AND  (DATE(invhist_transdate) BETWEEN &lt;? value("startDate") ?> AND &lt;? value("endDate") ?> )
   AND (transType(invhist_transtype, &lt;? value("transType") ?>))
&lt;? if exists("orderType") ?>
  AND  (invhist_ordtype=&lt;? value("orderType") ?>)
&lt;? endif ?>
&lt;? if exists("orderNumber") ?>
  AND  (invhist_ordnumber ~ &lt;? value("orderNumber") ?>)
  AND  (invhist_ordtype = 'SO')
&lt;? endif ?>
&lt;? if exists("warehous_id") ?>
   AND (itemsite_warehous_id=&lt;? value("warehous_id") ?>)
&lt;? endif ?>
&lt;? if exists("item_id") ?>
  AND  (itemsite_item_id=&lt;? value("item_id") ?>)
&lt;? endif ?>
&lt;? if exists("itemgrp_id") ?>
   AND (item_id IN (SELECT itemgrpitem_item_id
                      FROM itemgrpitem
                     WHERE (itemgrpitem_itemgrp_id=&lt;? value("itemgrp_id") ?>)))
&lt;? elseif exists("itemgrp_pattern") ?>
   AND (item_id IN (SELECT itemgrpitem_item_id
                      FROM itemgrpitem, itemgrp
                     WHERE ( (itemgrpitem_itemgrp_id=itemgrp_id)
                       AND (itemgrp_name ~ &lt;? value("itemgrp_pattern") ?>) ) ))
&lt;? elseif exists("classcode_id") ?>
   AND (item_classcode_id=&lt;? value("classcode_id") ?>)
&lt;? elseif exists("classcode_pattern") ?>
   AND (item_classcode_id IN (SELECT classcode_id
                                FROM classcode
                               WHERE (classcode_code ~ &lt;? value("classcode_pattern") ?>)))
&lt;? elseif exists("plancode_id") ?>
   AND (itemsite_plancode_id=&lt;? value("plancode_id") ?>)
&lt;? elseif exists("plancode_pattern") ?>
   AND (itemsite_plancode_id IN (SELECT plancode_id
                                   FROM plancode
                                  WHERE (plancode_code ~ &lt;? value("plancode_pattern") ?>)))
&lt;? elseif exists("itemgrp") ?>
   AND (item_id IN (SELECT DISTINCT itemgrpitem_item_id FROM itemgrpitem))
&lt;? endif ?>
);</sql>
 </querysource>
 <querysource>
  <name>footer</name>
  <sql>SELECT formatMoney(sum(invhist_value_after-invhist_value_before)) AS transvalue_total
FROM itemsite, item, warehous AS whs1, invhist LEFT OUTER JOIN
     warehous AS whs2 ON (invhist_xfer_warehous_id=whs2.warehous_id) 
WHERE ( (invhist_itemsite_id=itemsite_id)
  AND  (itemsite_item_id=item_id) 
  AND  (itemsite_warehous_id=whs1.warehous_id)
  AND  (DATE(invhist_transdate) BETWEEN &lt;? value("startDate") ?> AND &lt;? value("endDate") ?> )
  AND  (transType(invhist_transtype, &lt;? value("transType") ?>))
&lt;? if exists("orderType") ?>
  AND  (invhist_ordtype=&lt;? value("orderType") ?>)
&lt;? endif ?>
&lt;? if exists("orderNumber") ?>
  AND  (invhist_ordnumber ~ &lt;? value("orderNumber") ?>)
  AND  (invhist_ordtype = 'SO')
&lt;? endif ?>
&lt;? if exists("warehous_id") ?>
  AND  (itemsite_warehous_id=&lt;? value("warehous_id") ?>)
&lt;? endif ?>
&lt;? if exists("item_id") ?>
  AND  (itemsite_item_id=&lt;? value("item_id") ?>)
&lt;? endif ?>
&lt;? if exists("classcode_id") ?>
  AND  (item_classcode_id=&lt;? value("classcode_id") ?>)
&lt;? elseif exists("itemgrp_id") ?>
  AND (item_id IN (SELECT itemgrpitem_item_id
		   FROM itemgrpitem
		   WHERE (itemgrpitem_itemgrp_id=&lt;? value("itemgrp_id") ?>)))
&lt;? elseif exists("plancode_id") ?>
  AND  (itemsite_plancode_id=&lt;? value("plancode_id") ?>)
&lt;? elseif exists("classcode_pattern") ?>
  AND  (item_classcode_id IN (SELECT classcode_id
			      FROM classcode
			      WHERE (classcode_code ~ &lt;? value ("classcode_pattern") ?>)))
&lt;? elseif exists("itemgrp_pattern") ?>
  AND (item_id IN (SELECT itemgrpitem_item_id
		   FROM itemgrpitem, itemgrp
		   WHERE ( (itemgrpitem_itemgrp_id=itemgrp_id)
		     AND  (itemgrp_name ~ &lt;? value ("itemgrp_pattern") ?>))))
&lt;? elseif exists("plancode_pattern") ?>
  AND (itemsite_plancode_id IN (SELECT plancode_id
				FROM plancode
				WHERE (plancode_code ~ &lt;? value("plancode_pattern") ?>)))
&lt;? elseif exists("itemgrp") ?>
  AND (item_id IN (SELECT DISTINCT itemgrpitem_item_id FROM itemgrpitem))
&lt;? endif ?>
)</sql>
 </querysource>
 <rpthead>
  <height>242</height>
  <field>
   <rect>
    <x>585</x>
    <y>140</y>
    <width>150</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>enddate</column>
   </data>
  </field>
  <label>
   <rect>
    <x>5</x>
    <y>200</y>
    <width>50</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Site</string>
  </label>
  <label>
   <rect>
    <x>660</x>
    <y>211</y>
    <width>72</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Area To</string>
  </label>
  <label>
   <rect>
    <x>660</x>
    <y>222</y>
    <width>72</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Val. After</string>
  </label>
  <field>
   <rect>
    <x>145</x>
    <y>120</y>
    <width>300</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>lbl_value</column>
   </data>
  </field>
  <field>
   <rect>
    <x>145</x>
    <y>140</y>
    <width>200</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>warehouse</column>
   </data>
  </field>
  <label>
   <rect>
    <x>471</x>
    <y>120</y>
    <width>104</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Start Date:</string>
  </label>
  <label>
   <rect>
    <x>660</x>
    <y>200</y>
    <width>72</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>QOH After</string>
  </label>
  <field>
   <rect>
    <x>272</x>
    <y>10</y>
    <width>450</width>
    <height>40</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>18</size>
    <weight>bold</weight>
   </font>
   <right/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>lbl_title</column>
   </data>
  </field>
  <label>
   <rect>
    <x>200</x>
    <y>211</y>
    <width>228</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Item Description</string>
  </label>
  <label>
   <rect>
    <x>585</x>
    <y>222</y>
    <width>72</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Val. Before</string>
  </label>
  <label>
   <rect>
    <x>60</x>
    <y>200</y>
    <width>130</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Time</string>
  </label>
  <line>
   <xstart>5</xstart>
   <ystart>237</ystart>
   <xend>745</xend>
   <yend>237</yend>
   <weight>2</weight>
  </line>
  <label>
   <rect>
    <x>32</x>
    <y>140</y>
    <width>104</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Site:</string>
  </label>
  <label>
   <rect>
    <x>5.68571</x>
    <y>211</y>
    <width>50</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Type</string>
  </label>
  <label>
   <rect>
    <x>586</x>
    <y>211</y>
    <width>72</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Area From</string>
  </label>
  <label>
   <rect>
    <x>585</x>
    <y>200</y>
    <width>72</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>QOH Before</string>
  </label>
  <field>
   <rect>
    <x>585</x>
    <y>120</y>
    <width>150</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>startdate</column>
   </data>
  </field>
  <field>
   <rect>
    <x>10</x>
    <y>120</y>
    <width>130</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <data>
    <query>head</query>
    <column>lbl_bytype</column>
   </data>
  </field>
  <label>
   <rect>
    <x>471</x>
    <y>140</y>
    <width>104</width>
    <height>20</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>End Date:</string>
  </label>
  <label>
   <rect>
    <x>200</x>
    <y>200</y>
    <width>228</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Item Number</string>
  </label>
  <label>
   <rect>
    <x>510</x>
    <y>211</y>
    <width>72</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Cost Method</string>
  </label>
  <label>
   <rect>
    <x>432</x>
    <y>200</y>
    <width>72</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>UOM</string>
  </label>
  <label>
   <rect>
    <x>60</x>
    <y>211</y>
    <width>130</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Order Number</string>
  </label>
  <label>
   <rect>
    <x>508</x>
    <y>200</y>
    <width>72</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Qty</string>
  </label>
  <label>
   <rect>
    <x>60</x>
    <y>222</y>
    <width>130</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Username</string>
  </label>
  <label>
   <rect>
    <x>510</x>
    <y>222</y>
    <width>72</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Value</string>
  </label>
 </rpthead>
 <pghead>
  <firstpage/>
  <height>2</height>
 </pghead>
 <pghead>
  <height>51</height>
  <label>
   <rect>
    <x>10</x>
    <y>0</y>
    <width>32</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Site</string>
  </label>
  <label>
   <rect>
    <x>585</x>
    <y>12</y>
    <width>72</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Area From</string>
  </label>
  <label>
   <rect>
    <x>585</x>
    <y>0</y>
    <width>72</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>QOH Before</string>
  </label>
  <label>
   <rect>
    <x>586.32</x>
    <y>25</y>
    <width>72</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Val. Before</string>
  </label>
  <label>
   <rect>
    <x>200</x>
    <y>0</y>
    <width>228</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Item Number</string>
  </label>
  <label>
   <rect>
    <x>510</x>
    <y>12</y>
    <width>72</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Cost Method</string>
  </label>
  <label>
   <rect>
    <x>10</x>
    <y>12</y>
    <width>32</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Type</string>
  </label>
  <label>
   <rect>
    <x>60</x>
    <y>0</y>
    <width>130</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Time</string>
  </label>
  <label>
   <rect>
    <x>660</x>
    <y>12</y>
    <width>72</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Area To</string>
  </label>
  <label>
   <rect>
    <x>200</x>
    <y>12</y>
    <width>228</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Item Description</string>
  </label>
  <label>
   <rect>
    <x>432</x>
    <y>0</y>
    <width>72</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>UOM</string>
  </label>
  <label>
   <rect>
    <x>60</x>
    <y>25</y>
    <width>130</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Username</string>
  </label>
  <label>
   <rect>
    <x>665</x>
    <y>25</y>
    <width>72</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Val. After</string>
  </label>
  <line>
   <xstart>5</xstart>
   <ystart>45</ystart>
   <xend>745</xend>
   <yend>45</yend>
   <weight>2</weight>
  </line>
  <label>
   <rect>
    <x>660</x>
    <y>0</y>
    <width>72</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>QOH After</string>
  </label>
  <label>
   <rect>
    <x>60</x>
    <y>12</y>
    <width>130</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Order Number</string>
  </label>
  <label>
   <rect>
    <x>508</x>
    <y>0</y>
    <width>72</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Qty</string>
  </label>
  <label>
   <rect>
    <x>510</x>
    <y>25</y>
    <width>72</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <hcenter/>
   <vcenter/>
   <string>Value</string>
  </label>
 </pghead>
 <section>
  <name>detail</name>
  <group>
   <name>invhist_id</name>
   <column>invhist_id</column>
   <head>
    <height>45</height>
    <field>
     <rect>
      <x>60</x>
      <y>0</y>
      <width>132</width>
      <height>12</height>
     </rect>
     <font>
      <face>Arial</face>
      <size>8</size>
      <weight>bold</weight>
     </font>
     <left/>
     <vcenter/>
     <data>
      <query>detail</query>
      <column>f_transdate</column>
     </data>
    </field>
    <field>
     <rect>
      <x>200</x>
      <y>0</y>
      <width>228</width>
      <height>12</height>
     </rect>
     <font>
      <face>Arial</face>
      <size>8</size>
      <weight>bold</weight>
     </font>
     <left/>
     <vcenter/>
     <data>
      <query>detail</query>
      <column>item_number</column>
     </data>
    </field>
    <field>
     <rect>
      <x>200</x>
      <y>25</y>
      <width>228</width>
      <height>12</height>
     </rect>
     <font>
      <face>Arial</face>
      <size>8</size>
      <weight>bold</weight>
     </font>
     <left/>
     <vcenter/>
     <data>
      <query>detail</query>
      <column>item_descrip2</column>
     </data>
    </field>
    <field>
     <rect>
      <x>660</x>
      <y>25</y>
      <width>72</width>
      <height>12</height>
     </rect>
     <font>
      <face>Arial</face>
      <size>8</size>
      <weight>bold</weight>
     </font>
     <right/>
     <vcenter/>
     <data>
      <query>detail</query>
      <column>valafter</column>
     </data>
    </field>
    <field>
     <rect>
      <x>60</x>
      <y>12</y>
      <width>132</width>
      <height>12</height>
     </rect>
     <font>
      <face>Arial</face>
      <size>8</size>
      <weight>bold</weight>
     </font>
     <left/>
     <vcenter/>
     <data>
      <query>detail</query>
      <column>ordernumber</column>
     </data>
    </field>
    <field>
     <rect>
      <x>585</x>
      <y>0</y>
      <width>72</width>
      <height>12</height>
     </rect>
     <font>
      <face>Arial</face>
      <size>8</size>
      <weight>bold</weight>
     </font>
     <right/>
     <vcenter/>
     <data>
      <query>detail</query>
      <column>qohbefore</column>
     </data>
    </field>
    <field>
     <rect>
      <x>5</x>
      <y>0</y>
      <width>50</width>
      <height>12</height>
     </rect>
     <font>
      <face>Arial</face>
      <size>8</size>
      <weight>bold</weight>
     </font>
     <hcenter/>
     <vcenter/>
     <data>
      <query>detail</query>
      <column>warehous_code</column>
     </data>
    </field>
    <field>
     <rect>
      <x>432</x>
      <y>0</y>
      <width>72</width>
      <height>12</height>
     </rect>
     <font>
      <face>Arial</face>
      <size>8</size>
      <weight>bold</weight>
     </font>
     <hcenter/>
     <vcenter/>
     <data>
      <query>detail</query>
      <column>invhist_invuom</column>
     </data>
    </field>
    <field>
     <rect>
      <x>60</x>
      <y>25</y>
      <width>132</width>
      <height>12</height>
     </rect>
     <font>
      <face>Arial</face>
      <size>8</size>
      <weight>bold</weight>
     </font>
     <left/>
     <vcenter/>
     <data>
      <query>detail</query>
      <column>username</column>
     </data>
    </field>
    <field>
     <rect>
      <x>585</x>
      <y>25</y>
      <width>72</width>
      <height>12</height>
     </rect>
     <font>
      <face>Arial</face>
      <size>8</size>
      <weight>bold</weight>
     </font>
     <right/>
     <vcenter/>
     <data>
      <query>detail</query>
      <column>valbefore</column>
     </data>
    </field>
    <field>
     <rect>
      <x>660</x>
      <y>12</y>
      <width>72</width>
      <height>12</height>
     </rect>
     <font>
      <face>Arial</face>
      <size>8</size>
      <weight>bold</weight>
     </font>
     <right/>
     <vcenter/>
     <data>
      <query>detail</query>
      <column>locto</column>
     </data>
    </field>
    <field>
     <rect>
      <x>660</x>
      <y>0</y>
      <width>72</width>
      <height>12</height>
     </rect>
     <font>
      <face>Arial</face>
      <size>8</size>
      <weight>bold</weight>
     </font>
     <right/>
     <vcenter/>
     <data>
      <query>detail</query>
      <column>qohafter</column>
     </data>
    </field>
    <field>
     <rect>
      <x>5</x>
      <y>12</y>
      <width>50</width>
      <height>12</height>
     </rect>
     <font>
      <face>Arial</face>
      <size>8</size>
      <weight>bold</weight>
     </font>
     <hcenter/>
     <vcenter/>
     <data>
      <query>detail</query>
      <column>invhist_transtype</column>
     </data>
    </field>
    <field>
     <rect>
      <x>510</x>
      <y>0</y>
      <width>72</width>
      <height>12</height>
     </rect>
     <font>
      <face>Arial</face>
      <size>8</size>
      <weight>bold</weight>
     </font>
     <right/>
     <vcenter/>
     <data>
      <query>detail</query>
      <column>transqty</column>
     </data>
    </field>
    <field>
     <rect>
      <x>585</x>
      <y>12</y>
      <width>72</width>
      <height>12</height>
     </rect>
     <font>
      <face>Arial</face>
      <size>8</size>
      <weight>bold</weight>
     </font>
     <right/>
     <vcenter/>
     <data>
      <query>detail</query>
      <column>locfrom</column>
     </data>
    </field>
    <field>
     <rect>
      <x>200</x>
      <y>12</y>
      <width>228</width>
      <height>12</height>
     </rect>
     <font>
      <face>Arial</face>
      <size>8</size>
      <weight>bold</weight>
     </font>
     <left/>
     <vcenter/>
     <data>
      <query>detail</query>
      <column>item_descrip1</column>
     </data>
    </field>
    <field>
     <rect>
      <x>510</x>
      <y>12</y>
      <width>72</width>
      <height>12</height>
     </rect>
     <font>
      <face>Arial</face>
      <size>8</size>
      <weight>bold</weight>
     </font>
     <right/>
     <vcenter/>
     <data>
      <query>detail</query>
      <column>costmethod</column>
     </data>
    </field>
    <field>
     <rect>
      <x>510</x>
      <y>25</y>
      <width>72</width>
      <height>12</height>
     </rect>
     <font>
      <face>Arial</face>
      <size>8</size>
      <weight>bold</weight>
     </font>
     <right/>
     <vcenter/>
     <data>
      <query>detail</query>
      <column>f_transvalue</column>
     </data>
    </field>
   </head>
   <foot>
    <height>9</height>
    <line>
     <xstart>5</xstart>
     <ystart>5</ystart>
     <xend>745</xend>
     <yend>5</yend>
     <weight>0</weight>
    </line>
   </foot>
  </group>
  <detail>
   <key>
    <query>detail</query>
   </key>
   <height>16</height>
   <field>
    <rect>
     <x>585</x>
     <y>0</y>
     <width>72</width>
     <height>12</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>locationqtybefore</column>
    </data>
   </field>
   <field>
    <rect>
     <x>200</x>
     <y>0</y>
     <width>228</width>
     <height>12</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>locationname</column>
    </data>
   </field>
   <field>
    <rect>
     <x>508</x>
     <y>0</y>
     <width>72</width>
     <height>12</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>detailqty</column>
    </data>
   </field>
   <field>
    <rect>
     <x>660</x>
     <y>0</y>
     <width>72</width>
     <height>12</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <right/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>locationqtyafter</column>
    </data>
   </field>
  </detail>
 </section>
 <pgfoot>
  <height>14</height>
  <label>
   <rect>
    <x>0</x>
    <y>0</y>
    <width>85</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Report Date:</string>
  </label>
  <field>
   <rect>
    <x>705</x>
    <y>0</y>
    <width>40</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Context Query</query>
    <column>page_number</column>
   </data>
  </field>
  <label>
   <rect>
    <x>612</x>
    <y>0</y>
    <width>85</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Page:</string>
  </label>
  <field>
   <rect>
    <x>90</x>
    <y>0</y>
    <width>100</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Context Query</query>
    <column>report_date</column>
   </data>
  </field>
 </pgfoot>
 <rptfoot>
  <height>20</height>
  <field>
   <rect>
    <x>510</x>
    <y>5</y>
    <width>72</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <right/>
   <vcenter/>
   <data>
    <query>footer</query>
    <column>transvalue_total</column>
   </data>
   <format builtin="true">money</format>
  </field>
  <label>
   <rect>
    <x>5</x>
    <y>5</y>
    <width>130</width>
    <height>12</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Total:</string>
  </label>
 </rptfoot>
</report>
