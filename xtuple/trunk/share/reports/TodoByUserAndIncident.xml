<!DOCTYPE openRPTDef>
<report>
 <title>To-Do List Items By User And Incident</title>
 <name>TodoByUserAndIncident</name>
 <description></description>
 <size>Letter</size>
 <portrait/>
 <topmargin>50</topmargin>
 <bottommargin>50</bottommargin>
 <rightmargin>50</rightmargin>
 <leftmargin>50</leftmargin>
 <querysource>
  <name>detail</name>
  <sql>SELECT todoitem_id, incdt_id, incdtpriority_name, incdt_number,
       usr_username, todoitem_name, todoitem_due_date, 
       todoitem_start_date, todoitem_status,
       todoitem_description
FROM usr, todoitem LEFT OUTER JOIN
     incdt ON (todoitem_incdt_id = incdt_id)
     LEFT OUTER JOIN incdtpriority ON (incdtpriority_id=todoitem_priority_id)
WHERE ((usr_id=todoitem_usr_id)
&lt;? if not exists("showInactive") ?>
  AND todoitem_active 
&lt;? endif ?>
&lt;? if not exists("showCompleted") ?>
  AND todoitem_status != 'C' 
&lt;? endif ?>
&lt;? if exists("usr_id") ?>
  AND (usr_id=&lt;? value("usr_id") ?>)
&lt;? elseif exists("usr_pattern") ?>
  AND (usr_username ~* &lt;? value("usr_pattern") ?>)
&lt;? endif ?>
&lt;? if exists("incdt_id") ?>
  AND (todoitem_incdt_id=&lt;? value("incdt_id") ?>)
&lt;? endif ?>&lt;? if exists("start_date_start") ?>
  AND (todoitem_start_date>=&lt;? value("start_date_start") ?>)
&lt;? endif ?>&lt;? if exists("start_date_end") ?>
  AND (todoitem_start_date&lt;=&lt;? value("start_date_end") ?>)&lt;? endif ?>
&lt;? if exists("due_date_start") ?>
  AND (todoitem_due_date>=&lt;? value("due_date_start") ?>)
&lt;? endif ?>&lt;? if exists("due_date_end") ?>
  AND (todoitem_due_date&lt;=&lt;? value("due_date_end") ?>)
&lt;? endif ?>
) ORDER BY usr_username, incdtpriority_order;</sql>
 </querysource>
 <querysource>
  <name>username</name>
  <sql>SELECT
  &lt;? if exists("usr_id") ?>
    usr_username AS usr
    FROM usr
    WHERE (usr_id=&lt;? value("usr_id") ?>)
  &lt;? elseif exists("usr_pattern") ?>
    &lt;? value("usr_pattern") ?>
  &lt;? else ?>
    'ALL' AS usr
  &lt;? endif ?>
;</sql>
 </querysource>
 <querysource>
  <name>incident</name>
  <sql>SELECT
  &lt;? if exists("incdt_id") ?>
    incdt_number
    FROM incdt
    WHERE (incdt_id=&lt;? value("incdt_id") ?>)
  &lt;? else ?>
    'ALL' AS incdt_number
  &lt;? endif ?>
;</sql>
 </querysource>
 <rpthead>
  <height>132</height>
  <field>
   <rect>
    <x>135</x>
    <y>75</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>9</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Parameter Query</query>
    <column>start_date_start</column>
   </data>
  </field>
  <label>
   <rect>
    <x>175</x>
    <y>111</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Incident</string>
  </label>
  <label>
   <rect>
    <x>5</x>
    <y>45</y>
    <width>125</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>User:</string>
  </label>
  <label>
   <rect>
    <x>295</x>
    <y>10</y>
    <width>450</width>
    <height>37</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>18</size>
    <weight>bold</weight>
   </font>
   <right/>
   <vcenter/>
   <string>To-Do List Items By User And Incident</string>
  </label>
  <label>
   <rect>
    <x>5</x>
    <y>90</y>
    <width>125</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Due Date between:</string>
  </label>
  <field>
   <rect>
    <x>300</x>
    <y>90</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>9</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Parameter Query</query>
    <column>due_date_end</column>
   </data>
  </field>
  <line>
   <xstart>5</xstart>
   <ystart>126</ystart>
   <xend>745</xend>
   <yend>126</yend>
   <weight>2</weight>
  </line>
  <field>
   <rect>
    <x>300</x>
    <y>72</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>9</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Parameter Query</query>
    <column>start_date_end</column>
   </data>
  </field>
  <field>
   <rect>
    <x>135</x>
    <y>90</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>9</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Parameter Query</query>
    <column>due_date_start</column>
   </data>
  </field>
  <label>
   <rect>
    <x>240</x>
    <y>90</y>
    <width>50</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>and</string>
  </label>
  <label>
   <rect>
    <x>475</x>
    <y>111</y>
    <width>50</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Status</string>
  </label>
  <field>
   <rect>
    <x>135</x>
    <y>45</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>9</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>username</query>
    <column>usr</column>
   </data>
  </field>
  <label>
   <rect>
    <x>240</x>
    <y>72</y>
    <width>50</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>and</string>
  </label>
  <label>
   <rect>
    <x>250</x>
    <y>111</y>
    <width>200</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Name</string>
  </label>
  <label>
   <rect>
    <x>550</x>
    <y>111</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Due Date</string>
  </label>
  <label>
   <rect>
    <x>675</x>
    <y>111</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Start Date</string>
  </label>
  <label>
   <rect>
    <x>100</x>
    <y>111</y>
    <width>50</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Priority</string>
  </label>
  <label>
   <rect>
    <x>5</x>
    <y>60</y>
    <width>125</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Incident:</string>
  </label>
  <label>
   <rect>
    <x>5</x>
    <y>75</y>
    <width>125</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>10</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Start Date between:</string>
  </label>
  <field>
   <rect>
    <x>135</x>
    <y>60</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>9</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>incident</query>
    <column>incdt_number</column>
   </data>
  </field>
  <label>
   <rect>
    <x>10</x>
    <y>111</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>User</string>
  </label>
 </rpthead>
 <pghead>
  <firstpage/>
  <height>6</height>
 </pghead>
 <pghead>
  <height>21</height>
  <label>
   <rect>
    <x>675</x>
    <y>0</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Start Date</string>
  </label>
  <line>
   <xstart>5</xstart>
   <ystart>15</ystart>
   <xend>745</xend>
   <yend>15</yend>
   <weight>2</weight>
  </line>
  <label>
   <rect>
    <x>475</x>
    <y>0</y>
    <width>50</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Status</string>
  </label>
  <label>
   <rect>
    <x>550</x>
    <y>0</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Due Date</string>
  </label>
  <label>
   <rect>
    <x>175</x>
    <y>0</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Incident</string>
  </label>
  <label>
   <rect>
    <x>100</x>
    <y>0</y>
    <width>50</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Priority</string>
  </label>
  <label>
   <rect>
    <x>10</x>
    <y>0</y>
    <width>75</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>User</string>
  </label>
  <label>
   <rect>
    <x>250</x>
    <y>0</y>
    <width>200</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <left/>
   <vcenter/>
   <string>Name</string>
  </label>
 </pghead>
 <section>
  <name>detail</name>
  <group>
   <name>ByUser</name>
   <column>usr_username</column>
  </group>
  <detail>
   <key>
    <query>detail</query>
   </key>
   <height>28</height>
   <field>
    <rect>
     <x>175</x>
     <y>0</y>
     <width>75</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>incdt_number</column>
    </data>
   </field>
   <field>
    <rect>
     <x>100</x>
     <y>0</y>
     <width>50</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <top/>
    <data>
     <query>detail</query>
     <column>incdtpriority_name</column>
    </data>
   </field>
   <text>
    <rect>
     <x>250</x>
     <y>15</y>
     <width>500</width>
     <height>15</height>
    </rect>
    <bottompad>0</bottompad>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <top/>
    <data>
     <query>detail</query>
     <column>todoitem_description</column>
    </data>
   </text>
   <field>
    <rect>
     <x>250</x>
     <y>0</y>
     <width>200</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <top/>
    <data>
     <query>detail</query>
     <column>todoitem_name</column>
    </data>
   </field>
   <field>
    <rect>
     <x>550</x>
     <y>0</y>
     <width>100</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>todoitem_due_date</column>
    </data>
   </field>
   <field>
    <rect>
     <x>675</x>
     <y>0</y>
     <width>100</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>todoitem_start_date</column>
    </data>
   </field>
   <field>
    <rect>
     <x>475</x>
     <y>0</y>
     <width>50</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <vcenter/>
    <data>
     <query>detail</query>
     <column>todoitem_status</column>
    </data>
   </field>
   <field>
    <rect>
     <x>10</x>
     <y>0</y>
     <width>75</width>
     <height>15</height>
    </rect>
    <font>
     <face>Arial</face>
     <size>8</size>
     <weight>bold</weight>
    </font>
    <left/>
    <top/>
    <data>
     <query>detail</query>
     <column>usr_username</column>
    </data>
   </field>
  </detail>
 </section>
 <pgfoot>
  <height>16</height>
  <label>
   <rect>
    <x>615</x>
    <y>0</y>
    <width>85</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Page:</string>
  </label>
  <label>
   <rect>
    <x>0</x>
    <y>0</y>
    <width>85</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>normal</weight>
   </font>
   <right/>
   <vcenter/>
   <string>Report Date:</string>
  </label>
  <field>
   <rect>
    <x>705</x>
    <y>0</y>
    <width>40</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Context Query</query>
    <column>page_number</column>
   </data>
  </field>
  <field>
   <rect>
    <x>90</x>
    <y>0</y>
    <width>100</width>
    <height>15</height>
   </rect>
   <font>
    <face>Arial</face>
    <size>8</size>
    <weight>bold</weight>
   </font>
   <left/>
   <vcenter/>
   <data>
    <query>Context Query</query>
    <column>report_date</column>
   </data>
  </field>
 </pgfoot>
</report>
